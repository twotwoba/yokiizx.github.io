---
title: 'å›æº¯ç®—æ³•ä¹‹æ’åˆ—ç»„åˆ'
date: 2022-10-09T20:49:13+08:00
---

## æ’åˆ—ç»„åˆ(permutation and combination)

ä¸€äº›ç»éªŒï¼š

1. backtrack å‡½æ•°ç”¨æ¥è¿›è¡Œæ·±åº¦éå†(å‡½æ•°å˜›,ä¸æ–­è¿›è°ƒç”¨æ ˆå–½)ï¼Œfor å¾ªç¯ç”¨æ¥æ§åˆ¶æ¯ä¸€å±‚èƒ½éå†å…ƒç´ ã€‚
2. å­é›†ä¸ç»„åˆæ˜¯ä¸€ç±»é¢˜æ— éœ€è€ƒè™‘é¡ºåºï¼Œè€Œæ’åˆ—éœ€è¦è€ƒè™‘é¡ºåºã€‚æ‰€ä»¥å­é›†å’Œç»„åˆéœ€è¦ä¸€ä¸ªå‚æ•° start æ¥è¿‡æ»¤åç»­çš„æ ‘æã€‚
   - ç»„åˆï¼š`backtrack = (start) => {}`
   - æ’åˆ—ï¼š`backtrack = () => {}`
3. æ— é‡å¤å…ƒç´ æ—¶ï¼Œä¸éœ€è¦å‰ªæï¼›æœ‰é‡å¤å…ƒç´ æ—¶ï¼Œéœ€è¦å…ˆæ’åºï¼Œç„¶åå‰ªæï¼Œè¿™ä¸€æ­¥åœ¨ for å¾ªç¯å†…ã€‚
4. å…ƒç´ å¯ä»¥å¤é€‰ï¼Œ`backtrack(i)` å¦åˆ™ `backtrack(i + 1)`ï¼Œè¿™ä¸€æ­¥åœ¨ for å¾ªç¯å†…ã€‚
5. é’ˆå¯¹æ’åˆ—ï¼Œéœ€è¦ä½¿ç”¨ used å‰ªæã€‚  
   å¦‚æœæ’åˆ—ä¸­æœ‰é‡å¤å…ƒç´ ï¼Œéœ€è¦ä¿è¯ç›¸åŒå…ƒç´ åœ¨æ’åˆ—ä¸­çš„ç›¸å¯¹ä½ç½®ä¿æŒä¸å˜ï¼Œæ‰€ä»¥å‰ªææ¡ä»¶è¦å¤šåŠ ä¸€ä¸ª `!used[i-1]`ï¼Œå…¶å«ä¹‰æ˜¯ï¼šå¦‚æœå‰é¢çš„å…ƒç´ æ²¡æœ‰ç”¨è¿‡ï¼Œåˆ™è·³è¿‡ï¼ŒA1A2A3ï¼Œä¸ºäº†ä¿è¯é¡ºåºï¼Œä¸€å®šæ˜¯ A1 æœ‰ç”¨è¿‡æˆ‘æ‰èƒ½ç”¨ A2 è¿™æ ·å­ã€‚

> å…¶å®è¿™ç§å›æº¯ï¼Œä¸ dfs å¾ˆç›¸åƒï¼Œåªä¸è¿‡å›æº¯æ˜¯éå†æ ‘æï¼Œè€Œ dfs æ˜¯éå†èŠ‚ç‚¹ã€‚
> backtrack ä¸­ for å¾ªç¯ä»¥å¤–éƒ½æ˜¯èŠ‚ç‚¹æ“ä½œä½ç½®ï¼Œfor å¾ªç¯å†…æ˜¯æ ‘æçš„æ“ä½œä½ç½®

å¦å¤–æ¶‰åŠåˆ°é€’å½’éƒ½éœ€è¦æ³¨æ„ç»ˆæ­¢æ¡ä»¶å“¦ ğŸ‘»ã€‚

##### [39.ç»„åˆæ€»å’Œ](https://leetcode.cn/problems/combination-sum/)

å…³é”®ç‚¹ï¼š

1. æ— é‡å¤å…ƒç´ 
2. å…ƒç´ å¯ä»¥é‡å¤é€‰ã€‚

```JavaScript
/**
 * @param {number[]} candidates
 * @param {number} target
 * @return {number[][]}
 */
var combinationSum = function(candidates, target) {
    const res = []
    const track = []
    let sum = 0
    const backtrack = (start) => {
        if(sum === target) {
            res.push([...track])
            return
        }
        if(sum > target) return
        for(let i = start; i < candidates.length; ++i) {
            const v = candidates[i]
            sum += v
            track.push(v)
            backtrack(i)
            sum -= v
            track.pop()
        }
    }
    backtrack(0)
    return res
};
```

##### [40.ç»„åˆæ€»å’Œ II](https://leetcode.cn/problems/combination-sum-ii/)

å…³é”®ç‚¹ï¼š

1. æœ‰é‡å¤å…ƒç´ 
2. ä¸å¯ä»¥é‡å¤é€‰æ‹©
3. è¦æ±‚ ä¸èƒ½åŒ…å«é‡å¤çš„ç»„åˆ

```JavaScript
/**
 * @param {number[]} candidates
 * @param {number} target
 * @return {number[][]}
 */
var combinationSum2 = function(candidates, target) {
    candidates.sort((a,b) => a - b)
    const res = []
    const track = []
    let sum = 0
    const backtrack = (start) => {
        if(sum === target) {
            res.push([...track])
            return
        }
        for(let i = start; i < candidates.length; ++i) {
            if(sum + candidates[i] > target) continue
            if(i > start && candidates[i] === candidates[i - 1]) continue
            const v = candidates[i]
            track.push(v)
            sum += v
            backtrack(i + 1)
            track.pop()
            sum -= v
        }
    }
    backtrack(0)
    return res
};
```

##### [77.ç»„åˆ](https://leetcode.cn/problems/combinations/)

è¿™é“é¢˜æ²¡æœ‰ç›´æ¥è¯´å‡ºæ˜¯å¦æœ‰é‡å¤å…ƒç´ ï¼Œæ˜¯å¦å¯ä»¥å¤é€‰éœ€è¦æˆ‘ä»¬è‡ªå·±å®¡é¢˜æç‚¼ã€‚

å…³é”®ç‚¹ï¼š

1. æ— é‡å¤å…ƒç´ 
2. ä¸å¯ä»¥å¤é€‰

```JavaScript
/**
 * @param {number} n
 * @param {number} k
 * @return {number[][]}
 */
var combine = function(n, k) {
    const res = []
    const track = []
    const backtrack = (start) => {
        if(track.length === k) {
            res.push([...track])
            return
        }
        for(let i = start; i <= n; ++i) {
            track.push(i)
            backtrack(i + 1)
            track.pop()
        }
    }
    backtrack(1)
    return res
};
```

##### [78.å­é›†](https://leetcode.cn/problems/subsets/)

å…³é”®ç‚¹ï¼š

1. æ— é‡å¤å…ƒç´ 
2. ä¸å¯å¤é€‰

```JavaScript
/**
 * @param {number[]} nums
 * @return {number[][]}
 */
var subsets = function(nums) {
    const res = []
    const track = []
    const backtrack = (start) => {
        res.push([...track])
        if(track.length === nums.length) return
        for(let i = start; i < nums.length; ++i) {
            track.push(nums[i])
            backtrack(i + 1)
            track.pop()
        }

    }
    backtrack(0)
    return res
};
```

> è¿™é“é¢˜çš„é€’å½’ç»“æŸæ¡ä»¶ï¼Œçœ‹ä¼¼æ²¡æœ‰è®¾ç½®ï¼Œå…¶å®æ˜¯é€šè¿‡ `start` æ¥æ§åˆ¶çš„ï¼Œè‹¥ `start >= nums.length` æ˜¯ä¸ä¼šè¿›å…¥ `for` å¾ªç¯çš„ï¼Œä¹Ÿå°±ç»“æŸçš„é€’å½’

##### [90.å­é›† II](https://leetcode.cn/problems/subsets-ii/)

å…³é”®ç‚¹ï¼š

1. æœ‰é‡å¤å…ƒç´ 
2. ä¸å¯é‡å¤é€‰æ‹©

```JavaScript
/**
 * @param {number[]} nums
 * @return {number[][]}
 */
var subsetsWithDup = function(nums) {
    nums.sort((a,b) => a - b)
    const res = []
    const track = []
    const backtrack = (start) => {
        res.push([...track])
        if(track.length === nums.length) return
        for(let i = start; i < nums.length; ++i) {
            if(i > start && nums[i] === nums[i - 1]) continue
            track.push(nums[i])
            backtrack(i + 1)
            track.pop()
        }
    }
    backtrack(0)
    return res
};
```

##### [46.å…¨æ’åˆ—](https://leetcode.cn/problems/permutations/)

å…³é”®ç‚¹ï¼š

1. æ— é‡å¤å…ƒç´ 
2. ä¸å¯å¤é€‰

```JavaScript
/**
 * @param {number[]} nums
 * @return {number[][]}
 */
var permute = function(nums) {
    const res = []
    const track = []
    const uesd = []
    const backtrack = () => {
        if(track.length === nums.length) {
            res.push([...track])
            return
        }
        for(let i = 0; i < nums.length; ++i) {
            const v = nums[i]
            if(uesd.includes(v)) continue
            track.push(v)
            uesd.push(v)
            backtrack()
            track.pop()
            uesd.pop()
        }
    }
    backtrack()
    return res
};
```

##### [47.å…¨æ’åˆ— II](https://leetcode.cn/problems/permutations-ii/)

å…³é”®ç‚¹ï¼š

1. æœ‰é‡å¤å…ƒç´ 
2. ä¸å¯å¤é€‰

```JavaScript
/**
 * @param {number[]} nums
 * @return {number[][]}
 */
var permuteUnique = function(nums) {
    nums.sort((a, b) => a - b)
    const res = []
    const track = []
    const used = []
    const backtrack = () => {
        if(track.length === nums.length) {
            res.push([...track])
            return
        }
        for(let i = 0; i < nums.length; ++i) {
            if(used[i]) continue
            if(i > 0 && nums[i] === nums[i-1] && !used[i-1]) continue // æ–°çš„å‰ªæé€»è¾‘ å°±æ˜¯ ä¿è¯ç›¸åŒå…ƒç´ çš„é¡ºåºå›ºå®šä¸å˜
            track.push(nums[i])
            used[i] = true
            backtrack()
            track.pop()
            used[i] = false
        }
    }
    backtrack()
    return res
};
```
