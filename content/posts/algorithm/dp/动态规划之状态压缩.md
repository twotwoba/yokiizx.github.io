---
title: 'åŠ¨æ€è§„åˆ’ä¹‹çŠ¶æ€å‹ç¼©'
date: 2022-10-12T01:26:36+08:00
tags: [algorithm, dynamic programming]
---

## çŠ¶æ€å‹ç¼©

çŠ¶æ€å‹ç¼©æ˜¯å¯¹ç©ºé—´å¤æ‚åº¦çš„ä¸€ç§ä¼˜åŒ–æ‰‹æ®µï¼Œæ¨èçœ‹çœ‹ labuladong å¤§ä½¬çš„æ–‡ç« ã€‚ï¼ˆå› ä¸ºä»–çš„ç½‘ç«™ç»å¸¸è·Ÿæ–°æ–‡ç« åœ°å€ï¼Œå°±ä¸è´´é“¾æ¥äº†ï¼‰ã€‚

**å¯¹äºçŠ¶æ€å‹ç¼©è¦æœ‰ä¸€å‰¯äºŒç»´ table çš„è„‘å›¾ï¼Œä»¥åŠå¯¹éå†æ–¹å‘æŒæ¡åˆ°ä½ã€‚**

```JavaScript
for (int i = n - 2; i >= 0; i--) {
    for (int j = i + 1; j < n; j++) {
        // çŠ¶æ€è½¬ç§»æ–¹ç¨‹
        if (s[i] == s[j])
            dp[i][j] = dp[i + 1][j - 1] + 2;
        else
            dp[i][j] = max(dp[i + 1][j], dp[i][j - 1]);
    }
}
```

å¯¹äºä¸Šæ–¹é€’æ¨å…¬å¼ï¼Œ`dp[i][j]` åªä¾èµ–äº `dp[i+1][j-1]`,`dp[i+1][j]`,`dp[i][j-1]`ï¼Œè§ä¸‹å›¾ã€‚

![](https://cdn.staticaly.com/gh/yokiizx/picgo@master/img/202210180953079.png)

è®°ä½ï¼š**ç©ºé—´å‹ç¼©çš„æ ¸å¿ƒæ€è·¯å°±æ˜¯ï¼Œå°†äºŒç»´æ•°ç»„ã€ŒæŠ•å½±ã€åˆ°ä¸€ç»´æ•°ç»„**ï¼š

![](https://cdn.staticaly.com/gh/yokiizx/picgo@master/img/202210181835977.png)

> åœ¨ä»£ç ä¸­å‘¢ï¼Œå°±æ˜¯æ— è„‘å»æ‰ dp[i][j] çš„ [i] è¿™ä¸ªç»´åº¦ï¼Œå»æ‰ç»´åº¦åï¼Œå¯èƒ½ä¼šäº§ç”Ÿè¦†ç›–é—®é¢˜ã€‚  
> ç„¶åæ€è€ƒæ¯ä¸ªä¸€ç»´ dp çš„å«ä¹‰ã€‚  
> æœ‰å¯èƒ½éœ€è¦è°ƒæ•´éå†é¡ºåºã€‚  
> base case ä¹Ÿè¦çœ‹ç€ä¿®æ”¹ï¼ŒåŒæ ·ä¹Ÿæ˜¯æŠ•å½±

ç»§ç»­ä¸Šé¢çš„ä¾‹å­ï¼š

i ä»ä¸‹å¾€ä¸Šéå†, j ä»å·¦å¾€å³éå†ï¼Œå³ i æ˜¯æ§åˆ¶éå†å±‚æ•°çš„ï¼Œi+1 å°±æ˜¯ä¸Šä¸€å±‚ã€‚

- dp[j]: åœ¨è¢«èµ‹å€¼ä¹‹å‰ä»£è¡¨ä¸Šä¸€è½®éå†çš„å€¼ï¼Œå³ dp[i+1][j]
- dp[j-1]: å› ä¸º j ä¹‹å‰çš„å·²ç»è¢«è¦†ç›–è¿‡äº†ï¼Œæ‰€ä»¥ä»£è¡¨ dp[i][j-1]
- ç°åœ¨å°±å·®ä¸€ä¸ª dp[i+1][j-1] äº†ï¼Œå› ä¸ºä¸€ç»´ï¼Œå®ƒè¢« dp[i][j-1] æ— æƒ…åœ°è¦†ç›–æ‰äº†ï¼Œå¯æ˜¯æŒ‰ç…§åŸæ¥çš„äºŒç»´ dp å¿…é¡»å¾—çŸ¥é“è¿™ä¸ªå€¼æ‰è¡Œï¼Œå’‹åŠå‘¢ï¼Ÿå…¶å®å¯ä»¥å¾ˆè‡ªç„¶çš„æƒ³åˆ°ï¼Œç”¨ä¸ªå˜é‡ç¼“å­˜ä½ä¸å°±å¥½äº†ï¼ŸYesï¼Œyou got it!

```JavaScript
for (int i = n - 2; i >= 0; i--) {
    // æ¯å±‚å¾ªç¯éƒ½å®šä¹‰ä¸€ä¸ªå˜é‡ååŠ©å‚¨å­˜ä¸€ç»´æ•°ç»„è¦æ±‚ j æ—¶ j-1 ä½ç½®è¢«è¦†ç›–å‰çš„å€¼
    let pre = 0;
    for (let j = i + 1; j < n; j++) {
        let temp = dp[j]; // dp[j] æ­¤æ—¶å–åˆ°çš„æ˜¯ä¸Šä¸€è½®éå†çš„å€¼ å³ dp[i+1][j]
        if (s[i] == s[j])
            // dp[i][j] = dp[i+1][j-1] + 2;
            dp[j] = pre + 2;
        else
            // dp[i][j] = max(dp[i+1][j], dp[i][j-1]);
            dp[j] = max(dp[j], dp[j - 1]);
        // ä¸‹è½®éå† j + 1ï¼Œ pre å°±æ˜¯ dp[i+1][j-1] äº†
        pre = temp;
    }
}
```

å¯èƒ½æœ‰ç‚¹æŠ½è±¡ï¼Œå†ä¸¾ä¸ªä¾‹å­:  
æ¯”å¦‚ j ç´¢å¼•ä» 1 å˜ä¸º 2 æ—¶ï¼Œä¸€ç»´æ•°ç»„ä¸­åˆå§‹åŒ– base case å·²ç»å æ»¡äº† 1,  
å½“éå†ç´¢å¼• 1 æ—¶, å…ˆæŠŠç´¢å¼• 1 çš„å€¼ç”¨ temp å­˜ä½, ç„¶åç´¢å¼• 1 ä¼šè¢«æ–°çš„å€¼ new å»è¦†ç›–æ‰,  
éå†åˆ°ç´¢å¼• 2 æ—¶, éœ€è¦æ ¹æ® dp[j-1] ä¹Ÿå°±æ˜¯åˆšåˆšè¢«è¦†ç›–æ‰åæ–°å€¼ new (åŸäºŒç»´ dp[i][j-1]) å’Œç´¢å¼• 1 ä¹‹å‰çš„å€¼ temp (åŸäºŒç»´ dp[i+1][j-1]) ä»¥åŠ ç´¢å¼• 2 è¢«èµ‹å€¼ä¹‹å‰çš„å€¼ dp[j] (åŸäºŒç»´ dp[i+1][j])æ¥æ¨å¯¼å‡ºã€‚å¦‚ä¸‹å›¾ ğŸ˜‚(ç”»çš„æœ‰ç‚¹ç®€çº¦äº†å“ˆ)

![](https://cdn.staticaly.com/gh/yokiizx/picgo@master/img/202210182331990.png)

æ›´ç®€å•çš„ï¼Œå¦‚æœ dp[i][j] åªä¸ dp[i-1][...] ç›¸å…³ï¼ŒæŠ•å½±åˆ°ä¸€ç»´ä¸Šï¼Œé‚£æ›´å¯ä»¥å‹ç¼©çŠ¶æ€å•¦ï¼Œè€Œä¸”è¿˜æ²¡æœ‰è¦†ç›–çš„é—®é¢˜ã€‚  
ä¸¤ä¸ªæ³¨æ„ç‚¹ï¼š

1. åªæ˜¯æ»šåŠ¨æ•°ç»„éœ€è¦æ³¨æ„ä¸‹éå†æ–¹å‘ï¼Œæœ‰æ—¶å€™å­˜åœ¨ç»´åº¦çš„éå†é¡ºåºä¼šç›¸åï¼Œæ¯”å¦‚ dp[j] ä¾èµ–äº dp[j-1]æ—¶ï¼Œå¦‚æœæ­£åºéå†ï¼Œdp[j-1]ä¼šè¢«æ–°çš„å€¼ç»™è¦†ç›–ï¼Œè¿™å°±ä¸å¯¹äº†ï¼Œæ‰€ä»¥å€’ç€æ¥å°±å¥½äº†ã€‚
2. å½“å»æ‰ä¸€ä¸ªç»´åº¦æ—¶ï¼Œå¦‚æœå­˜åœ¨ if åˆ¤æ–­ï¼Œæœ‰å¯èƒ½ä¼šæ¶ˆé™¤è¿™ä¸ªåˆ¤æ–­ï¼ŒåŠ åˆ° for å¾ªç¯åˆ¤æ–­ä¸Šå»ã€‚

æ¯”å¦‚ 1049 é¢˜çš„çŠ¶æ€å‹ç¼©ï¼š

```JavaScript
/**
 * @param {number[]} stones
 * @return {number}
 */
var lastStoneWeightII = function(stones) {
    const sum = stones.reduce((t,v) => t + v, 0)
    const target = sum >> 1
    const m = stones.length
    // çŠ¶æ€å‹ç¼©, å»æ‰ç¬¬ä¸€ä¸ªç»´åº¦
    const dp = new Array(target + 1).fill(0)
    for(let i = 1; i <= m; ++i) {
        // å»æ‰äº†ä¸€ä¸ªç»´åº¦, éå†é¡ºåºæ”¹å˜,é˜²æ­¢éœ€è¦ç”¨åˆ°çš„æ¨å¯¼æ•°æ®è¢«æ–°æ•°æ®è¦†ç›–,
        // å°‘äº†ä¸€ä¸ªif åŠ åˆ° for å¾ªç¯ä¸Šäº†
        for(let j = target; j >= stones[i - 1]; --j) {
            dp[j] = Math.max(dp[j], dp[j - stones[i - 1]] + stones[i - 1])
        }
    }
    return sum - 2 * dp[target]
};
```

ä»¥ä¸Šæ˜¯çŠ¶æ€å‹ç¼©çš„æ€è·¯ï¼Œè¿˜æ˜¯éœ€è¦å¤šå¤šå®è·µã€‚å¦‚æœ‰ä¸å¯¹ï¼Œè¯·æŒ‡æ•™ã€‚
