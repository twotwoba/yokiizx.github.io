---
title: 'æ‹“æ‰‘æ’åº'
date: 2023-02-19T16:03:41+08:00
---

## å‰ç½®çŸ¥è¯†

### å›¾çš„è¡¨ç°å½¢å¼ï¼š

![å›¾åŸºç¡€](https://raw.githubusercontent.com/yokiizx/picgo/main/images/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-2022-07-12.png)

```JavaScript
/** 0 -> 1, 0 -> 2; 1 -> 3; 2 -> 4 è¿™ä¹ˆä¸€å‰¯å›¾çš„å…·ä½“è¡¨ç° */
// é‚»æ¥è¡¨
graph = [[1,2], [3], [4]]
// é‚»æ¥çŸ©é˜µ
graph = [
  [false, true, true, false, false],
  [false, false, false, true, false],
  [false, false, false, false, true]
]
```

é‚»æ¥è¡¨å’Œé‚»æ¥çŸ©é˜µå„æœ‰ä¼˜åŠ£

- é‚»æ¥è¡¨ï¼Œå ç”¨ç©ºé—´å°‘ï¼Œä½†æ˜¯åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦ç›¸é‚»ï¼Œéœ€è¦èµ°ä¸€éæŸ¥æ‰¾
- é‚»æ¥çŸ©é˜µï¼ŒçŸ©é˜µä¸­å­˜åœ¨å¾ˆå¤šç©ºæ´ï¼Œè‚¯å®šéœ€è¦æ›´å¤šçš„å­˜å‚¨ç©ºé—´ï¼Œä½†æ˜¯åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦ç›¸é‚»ï¼Œç›´æ¥ `matrix[i][j]` åˆ¤æ–­æ˜¯å¦ä¸º true å³å¯

### å›¾çš„éå†

```JavaScript
// è®°å½•è¢«éå†è¿‡çš„èŠ‚ç‚¹, æœ‰ç¯æ—¶éœ€è¦è¿™ä¸ªæ¥è¾…åŠ©ä¸€ä¸‹
const visited = [] // boolean[];
// è®°å½•ä»èµ·ç‚¹åˆ°å½“å‰èŠ‚ç‚¹çš„è·¯å¾„
const onPath = [] // boolean[];

/* å›¾éå†æ¡†æ¶ DFS */
function traverse(graph, s) {
    if (visited[s]) return;
    // ç»è¿‡èŠ‚ç‚¹ sï¼Œæ ‡è®°ä¸ºå·²éå†
    visited[s] = true;
    // åšé€‰æ‹©ï¼šæ ‡è®°èŠ‚ç‚¹ s åœ¨è·¯å¾„ä¸Š
    onPath[s] = true;
    for (const neighbor of graph.neighbors(s)) {
        traverse(graph, neighbor);
    }
    // æ’¤é”€é€‰æ‹©ï¼šèŠ‚ç‚¹ s ç¦»å¼€è·¯å¾„
    onPath[s] = false;
}
```

> æ³¨æ„ DFS ä¸å›æº¯çš„å·®åˆ«ï¼š
>
> - å›æº¯åšé€‰æ‹©å’Œæ’¤é”€é€‰æ‹©æ˜¯åœ¨ for å¾ªç¯å†…ï¼Œå¯¹åº”é€‰æ‹©ã€æ’¤é”€é€‰æ‹©çš„å¯¹è±¡æ˜¯ã€Œæ ‘æã€
> - DFS åšé€‰æ‹©å’Œæ’¤é”€é€‰æ‹©æ˜¯åœ¨ for å¾ªç¯å¤–ï¼Œå¯¹åº”é€‰æ‹©ã€æ’¤é”€é€‰æ‹©çš„å¯¹è±¡æ˜¯ã€ŒèŠ‚ç‚¹ã€

### [797. æ‰€æœ‰å¯èƒ½çš„è·¯å¾„](https://leetcode.cn/problems/all-paths-from-source-to-target/description/)

```JavaScript
/**
 * @param {number[][]} graph
 * @return {number[][]}
 */
 // å›¾çš„éå†
var allPathsSourceTarget = function(graph) {
    const res = []
    const path = []
    const traverse = (graph, s) => {
        path.push(s)
        if(s === graph.length - 1) {
            res.push([...path])
            // å¯ä»¥åœ¨è¿™é‡Œ return, ä½†æ˜¯éœ€è¦ç»´æŠ¤ path:
            // path.pop()
            // return
            // ä¸ return ä¹Ÿå¯ä»¥, å› ä¸ºå›¾ä¸­æ²¡æœ‰ç¯, ä¸ä¼šæ— é™é€’å½’
        }
        for(const v of graph[s]) {
            traverse(graph, v)
        }
        path.pop()
    }
    traverse(graph, 0)
    return res
};
```

## æ‹“æ‰‘æ’åºå®šä¹‰

ç»™å®šä¸€ä¸ªåŒ…å« n ä¸ªèŠ‚ç‚¹çš„æœ‰å‘å›¾ Gï¼Œæˆ‘ä»¬ç»™å‡ºå®ƒçš„èŠ‚ç‚¹ç¼–å·çš„ä¸€ç§æ’åˆ—ï¼Œå¦‚æœæ»¡è¶³ï¼š

> å¯¹äºå›¾ G ä¸­çš„ä»»æ„ä¸€æ¡æœ‰å‘è¾¹ (u, v)ï¼Œu åœ¨æ’åˆ—ä¸­éƒ½å‡ºç°åœ¨ v çš„å‰é¢ã€‚

é‚£ä¹ˆç§°è¯¥æ’åˆ—æ˜¯å›¾ G çš„ã€Œæ‹“æ‰‘æ’åºã€ï¼Œæ‰€ä»¥æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š

- å›¾ G ä¸èƒ½æœ‰ç¯ï¼Œå¦åˆ™ä¸èƒ½ä¿è¯ u ä¸€å®šåœ¨ v ä¹‹å‰
- å¦‚æœå›¾ G æ˜¯æœ‰å‘æ— ç¯å›¾ï¼Œé‚£ä¹ˆå®ƒçš„æ‹“æ‰‘æ’åºå¯èƒ½ä¸æ­¢ä¸€ç§

> ç®€å•è®²ï¼ŒæŠŠä¸€ä¸ª æœ‰å‘æ— ç¯å›¾ è½¬æˆ çº¿æ€§çš„æ’åº å°±å« æ‹“æ‰‘æ’åºã€‚ç›´è§‚ç‚¹è®²ï¼ŒæŠŠä¸€å¹…å›¾ã€Œæ‹‰å¹³ã€åï¼Œè¿™ä¸ªã€Œæ‹‰å¹³ã€çš„å›¾é‡Œé¢ï¼Œæ‰€æœ‰ç®­å¤´æ–¹å‘éƒ½æ˜¯ä¸€è‡´çš„ã€‚

é‚£ä¹ˆä»£ç æ€ä¹ˆå®ç°æ‹“æ‰‘æ’åºå‘¢ï¼Ÿå…¶å® DFS å’Œ bfs éƒ½å¯ä»¥å®ç°æ‹“æ‰‘æ’åºï¼ŒDFS ç®—æ³•åˆ©ç”¨é€†ååºéå†ï¼ˆæˆ–è€…åˆ©ç”¨é€†é‚»æ¥è¡¨ï¼‰è¿›è¡Œæ‹“æ‰‘æ’åºï¼ŒBFS å€ŸåŠ© indegree(å…¥åº¦) æ•°ç»„ä¹Ÿèƒ½å®ç°ï¼Œå¹³æ—¶æ›´åº”è¯¥ç‰¢ç‰¢æŒæ¡ BFS çš„æ–¹æ³•å³å¯ã€‚

ã€Œå‡ºåº¦ã€å’Œã€Œå…¥åº¦ã€æ˜¯ã€Œæœ‰å‘å›¾ã€ä¸­çš„æ¦‚å¿µï¼Œå¾ˆç›´è§‚ï¼šå¦‚æœä¸€ä¸ªèŠ‚ç‚¹ x æœ‰ a æ¡è¾¹æŒ‡å‘åˆ«çš„èŠ‚ç‚¹ï¼ŒåŒæ—¶è¢« b æ¡è¾¹æ‰€æŒ‡ï¼Œåˆ™ç§°èŠ‚ç‚¹ x çš„å‡ºåº¦ä¸º aï¼Œå…¥åº¦ä¸º bã€‚

### [207.è¯¾ç¨‹è¡¨](https://leetcode.cn/problems/course-schedule/description/?favorite=2cktkvj)

DFS ç‰ˆæœ¬ç¯æ£€æµ‹ï¼š

```JavaScript
/**
 * @param {number} numCourses
 * @param {number[][]} prerequisites
 * @return {boolean}
 */
var canFinish = function(numCourses, prerequisites) {
    const buildGraph = () => {
        const graph = Array.from(Array(numCourses), () => [])
        for(let i = 0; i < prerequisites.length; ++i) {
            const [to, from] = prerequisites[i]
            graph[from].push(to)
        }
        return graph
    }
    const graph =  buildGraph()
    const path = new Array(numCourses).fill(false)
    const visited = new Array(numCourses).fill(false)
    let hasCycle = false
    const traverseGraph = (graph, s) => {
        if(path[s]) {
            hasCycle = true
            return
        }
        if(visited[s]) return
        visited[s] = true
        path[s] = true
        for(const v of graph[s]) {
            traverseGraph(graph, v)
        }
        path[s] = false
    }
    for (let i = 0; i < numCourses; i++) {
        // éå†å›¾ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹
        traverseGraph(graph, i);
    }
    return !hasCycle
};
```

BFS ç¯æ£€æµ‹ï¼š

```JavaScript
var canFinish = function(numCourses, prerequisites) {
    // æ„å›¾, åŒæ—¶æ„å»º indegree å…¥åº¦æ•°ç»„
    const indegree = new Array(numCourses).fill(0)
    const buildGraph = () => {
        const graph = Array.from(Array(numCourses), () => [])
        for(const edge of prerequisites) {
            const [to, from] = edge
            graph[from].push(to)
            indegree[to]++
        }
        return graph
    }
    const graph = buildGraph()
    // æ ¹æ®å…¥åº¦æ•°ç»„åˆå§‹åŒ– BFS ä½¿ç”¨çš„é˜Ÿåˆ—,
    // åªæŠŠå…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­, å› ä¸ºå®ƒä¸ä¾èµ–ä»»ä½•èŠ‚ç‚¹
    const queue = []
    for(let i = 0; i < numCourses; ++i) {
        if(indegree[i] === 0) queue.push(i)
    }

    // BFSéå†
    let count = 0
    while(queue.length) {
        // å¼¹å‡ºèŠ‚ç‚¹ s å¹¶æŠŠå®ƒæŒ‡å‘çš„èŠ‚ç‚¹çš„å…¥åº¦å‡ä¸€
        const s = queue.shift()
        count++
        for(const v of graph[s]) {
            indegree[v]--
            if(indegree[v] === 0) queue.push(v) // å…¥åº¦ä¸º 0 åˆ™å¯ä»¥åŠ å…¥é˜Ÿåˆ—äº†
        }
    }
    // å¦‚æœæœ‰ç¯, åˆ™å…¥åº¦ä¸ä¸º 0 å°±ä¸ä¼šå…¥é˜Ÿ,ä¹Ÿå°±ä¸èƒ½éå†å®Œæ‰€æœ‰èŠ‚ç‚¹
    // èƒ½éå†å®Œæ‰€æœ‰èŠ‚ç‚¹ä¹Ÿå°±ä¸å­˜åœ¨ç¯äº†
    return count === numCourses
};
```

ä¸‹é¢æ­£å¼å­¦ä¹ æ‹“æ‰‘æ’åºã€‚

### [210.è¯¾ç¨‹è¡¨ II](https://leetcode.cn/problems/course-schedule-ii/)

æ‹“æ‰‘æ’åº(DFS)ï¼š

å°±æ˜¯åœ¨ DFS ç¯æ£€æµ‹åŸºç¡€ä¸Šçš„ååºä½ç½®è¿›è¡ŒèŠ‚ç‚¹æ”¶é›†ï¼Œæ­¤æ—¶æ˜¯å€’åºçš„ï¼Œå†ç¿»è½¬ä¸€ä¸‹å³å¯ã€‚  
å½“ç„¶ä¹Ÿå¯ä»¥åˆ©ç”¨é€†é‚»æ¥è¡¨ `graph[to].push(from)`ï¼Œè¿™æ ·å°±ä¸ç”¨å€’åºäº†ã€‚

```JavaScript
/**
 * @param {number} numCourses
 * @param {number[][]} prerequisites
 * @return {number[]}
 */
var findOrder = function(numCourses, prerequisites) {
    // æ„å»ºå›¾ - é¢†æ¥è¡¨
    const buildGraph = () => {
        const graph = Array.from(Array(numCourses), () => [])
        for(let i = 0; i < prerequisites.length; ++i) {
            const [to, from] = prerequisites[i]
            graph[to].push(from) // æ³¨æ„è¿™é‡Œ
        }
        return graph
    }

    const visited = new Array(numCourses).fill(false)
    const path = new Array(numCourses).fill(false)
    const res = []
    let hasCycle = false
    // éå†å›¾
    const traverseGraph = (graph, s) => {
        if(path[s]) {
            hasCycle = true
            return
        }
        if(visited[s]) return
        visited[s] = true
        path[s] = true
        for(const v of graph[s]){
            traverseGraph(graph, v)
        }
        res.push(s) // ååºä½ç½®éå†ç»“æœå°±æ˜¯æ‹“æ‰‘æ’åºçš„ç»“æœ
        path[s] = false
    }

    const graph = buildGraph()
    for(let i = 0; i < numCourses; ++i) {
        traverseGraph(graph, i)
    }
    if(hasCycle) return []
    return res
};
```

æ‹“æ‰‘æ’åº(BFS)ï¼š

åŸºäº BFS çš„ç¯æ£€æµ‹ï¼Œå‡ºé˜Ÿçš„é¡ºåºå°±æ˜¯æ‹“æ‰‘æ’åºçš„ç»“æœã€‚

```JavaScript
var findOrder = function(numCourses, prerequisites) {
    // æ„å›¾, åŒæ—¶æ„å»º indegree
    const indegree = new Array(numCourses).fill(0)
    const buildGraph = () => {
        const graph = Array.from(Array(numCourses), () => [])
        for(const edge of prerequisites) {
            const [to, from] = edge
            graph[from].push(to)
            indegree[to]++
        }
        return graph
    }
    const graph = buildGraph()

    // åˆå§‹åŒ– BFS ä½¿ç”¨çš„é˜Ÿåˆ—, åªæŠŠå…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­, å› ä¸ºå®ƒä¸ä¾èµ–ä»»ä½•èŠ‚ç‚¹
    const queue = []
    for(let i = 0; i < numCourses; ++i) {
        if(indegree[i] === 0) queue.push(i) // æ³¨æ„æ˜¯èŠ‚ç‚¹ i
    }

    // BFSéå†å›¾
    let count = 0 // åˆ¤æ–­æ˜¯å¦æœ‰ç¯
    const res = [] // éå†å›¾æ˜¯å­˜å‚¨æ‹“æ‰‘æ’åºç»“æœ
    while(queue.length) {
        // å¼¹å‡ºèŠ‚ç‚¹ s å¹¶æŠŠå®ƒæŒ‡å‘çš„èŠ‚ç‚¹çš„å…¥åº¦å‡ä¸€
        const s = queue.shift()
        res.push(s)
        count++
        for(const v of graph[s]) {
            indegree[v]--
            if(indegree[v] === 0) queue.push(v) // å…¥åº¦ä¸º 0 åˆ™å¯ä»¥åŠ å…¥é˜Ÿåˆ—äº†
        }
    }
    if(count !== numCourses) return []
    return res
};
```

> æ‹“æ‰‘æ’åºæ˜¯å›¾ç®—æ³•é‡Œçš„åŸºç¡€ï¼Œå¯¹äº DFS å’Œ BFS çš„ç†è§£å¿…é¡»æ·±åˆ» ğŸ”¥

_æ‹“æ‰‘æ’åºåˆ¤æ–­æœ‰å‘å›¾æ˜¯å¦æœ‰ç¯ï¼Œè€Œæ£€æµ‹æ— å‘å›¾æ˜¯å¦æœ‰ç¯é‡‡ç”¨çš„æ•°æ®ç»“æ„æ˜¯ ã€Œå¹¶æŸ¥é›†ã€_
