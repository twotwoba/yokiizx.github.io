---
title: 'åŠ¨æ€è§„åˆ’2'
date: 2022-10-15T23:06:39+08:00
tags: [algorithm, dynamic programming]
---

ç»å…¸èƒŒåŒ…é—®é¢˜æ¥ä¸€æ²“~  
èƒŒåŒ…é—®é¢˜çš„ç»å…¸èµ„æ–™å½“ç„¶æ˜¯ï¼šèƒŒåŒ…ä¹è®²ã€‚æ­¤æ–‡åªè®°å½•ä¸‹ 0-1 èƒŒåŒ…å’Œå®Œå…¨èƒŒåŒ…ã€‚å‰©ä¸‹çš„æœ‰æ—¶é—´å¯ä»¥å†å­¦ä¹ å­¦ä¹ ã€‚

å€Ÿç”¨ä¸€ä¸‹ä»£ç éšæƒ³å½•çš„å›¾ï¼š

![](https://cdn.staticaly.com/gh/yokiizx/picgo@master/img/202210161922324.png)

---

01 èƒŒåŒ…ä¸€å®šè¦åƒé€ï¼Œå…¶å®å°±æ˜¯æ€ä¹ˆåšå‡ºæœ€ä½³é€‰æ‹©çš„åŸç†ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½æ˜¯é€šè¿‡åŠ¨æ€è§„åˆ’æ¥å¤„ç†çš„ï¼Œå¾€å¾€ä¼šåœ¨è„‘æµ·ä¸­ç»™å‡ºè¿™ä¹ˆä¸ªäºŒç»´çŸ©é˜µæ¥å¡«æ ¼å­ã€‚

é¢˜ç›®ï¼š
æœ‰ n ä»¶ç‰©å“å’Œä¸€ä¸ªæœ€å¤šèƒ½èƒŒé‡é‡ä¸º w çš„èƒŒåŒ…ã€‚ç¬¬ i ä»¶ç‰©å“çš„é‡é‡æ˜¯ weight[i]ï¼Œå¾—åˆ°çš„ä»·å€¼æ˜¯ value[i] ã€‚æ¯ä»¶ç‰©å“åªèƒ½ç”¨ä¸€æ¬¡ï¼Œæ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…é‡Œç‰©å“ä»·å€¼æ€»å’Œæœ€å¤§ã€‚

åˆ†æï¼š

1.  å®šä¹‰ `dp[i][j]`: è¡¨ç¤ºå‰ i (ç´¢å¼•å¯¹åº”ä¸º`[0..i-1]`) ä¸ªç‰©å“ä¸­ï¼Œå½“å‰èƒŒåŒ…å®¹é‡ä¸º `j`ï¼Œå¯ä»¥è£…å…¥ä»·å€¼çš„æœ€å¤§å€¼
2.  é€’å½’å…¬å¼ï¼Œå¯¹äºç‰©å“æœ‰é€‰æ‹©å’Œä¸é€‰ä¸¤ç§æƒ…å†µï¼Œå–è¾ƒå¤§è€…å³å¯
    - ä¸é€‰æ‹©ç‰©å“ iï¼Œåˆ™ `dp[i][j] = dp[i-1][j]`
    - é€‰æ‹©ç‰©å“ iï¼Œåˆ™ `dp[i][j] = dp[i-1][j-weight[i - 1]] + values[i-1]` (é‡è¦,æ˜¯å› ä¸º å‰ i ä¸ª ç´¢å¼•ä¸º i - 1)
3.  base case
    - å½“ j ä¸º 0ï¼Œå³èƒŒåŒ…å®¹é‡ä¸º 0ï¼Œ`dp[i][0] = 0`
    - å½“ i ä¸º 0ï¼Œå³ç‰©å“ä¸ªæ•°ä¸º 0ï¼Œ`dp[0][j] = 0`

```JavaScript
/**
 * @desc    0-1 èƒŒåŒ…é—®é¢˜
 * @param   {Number[]} weight - ç‰©å“é‡é‡é›†åˆ
 * @param   {Number[]} value  - ç‰©å“ä»·å€¼é›†åˆ
 * @param   {Number}   size   - èƒŒåŒ…å®¹é‡å¤§å°
 * @return  {Number}   max    - èƒ½è£…ä»·å€¼æœ€å¤§å€¼
 */
function zeroOne(weight, value, size) {
  const m = weight.length // mä¸ªç‰©å“
  // 1. dp[i][j] è¡¨ç¤ºå‰ i ä¸ªç‰©å“,èƒŒåŒ…å®¹é‡ä¸ºjæ—¶,ä»·å€¼æœ€å¤§ä¸ºdp[i][j] (æ±‚dp[m][size])
  const dp = Array.from(new Array(m + 1), _ => new Array(size + 1).fill(0))
  // base case åˆå§‹åŒ–æ—¶å·²åš dp[0][..] = 0; dp[..][0] = 1
  for(let i = 1; i <= m; ++i) {
    for(let j = 1; j <= size; ++j) {
      // åªèƒ½ä¸è£…å…¥èƒŒåŒ…
      if(weight[i-1] > j) dp[i][j] = dp[i-1][j]
      else dp[i][j] = Math.max(dp[i-1][j],dp[i-1][j-weight[i-1]] + value[i-1])
    }
  }
  return dp[m][size]
 }

// test
const weight = [12, 2, 1, 1]
const value = [4, 2, 1, 2]
const size = 15
console.log(zeroOne(weight, value, size)) // 8
```

---

##### [416.åˆ†å‰²ç­‰å’Œå­é›†](https://leetcode.cn/problems/partition-equal-subset-sum/)

è¿™ç§åˆ†å‰²ç±»çš„ï¼Œå¤§éƒ¨åˆ†éƒ½å¯ä»¥ä½¿ç”¨å›æº¯å»åšï¼Œä½†æ˜¯æ€§èƒ½å ªå¿§ï¼Œè¿™ä¸ªæ—¶å€™å°±åº”è¯¥è€ƒè™‘ä¸€ä¸‹åŠ¨æ€è§„åˆ’äº†ã€‚

å…¶å®è¿™é“é¢˜å°±æ˜¯ 01 èƒŒåŒ…é—®é¢˜ï¼Œåªä¸è¿‡æ²¡æ˜è¯´è€Œå·²ï¼šå¯¹æ•°ç»„æ±‚å’Œå¾— sumï¼Œæ˜¯å¦å­˜åœ¨å­é›†å’Œä¸º sum / 2ï¼Ÿè¿™ä¸å°±æ˜¯èƒŒåŒ…å®¹é‡ä¸º sum/2ï¼Œä»æ•°ç»„ä¸­é€‰æ‹©å…ƒç´ ä¸”æ¯ä¸ªå…ƒç´ éƒ½åªèƒ½ä½¿ç”¨ä¸€æ¬¡æ¥å¡«å……èƒŒåŒ…å–½ã€‚

```JavaScript
/**
 * @param {number[]} nums
 * @return {boolean}
 */
var canPartition = function(nums) {
    // å®šä¹‰dp[i][j]: è¡¨ç¤ºå‰iä¸ªå…ƒç´ å¯ä»¥è£…æ»¡å¤§å°ä¸ºjæ—¶çš„èƒŒåŒ…, (jæ˜¯å˜åŒ–çš„ jä¸º0æ—¶è£…æ»¡)
    // ä¸æ”¾å…¥ç¬¬iä¸ª(nums[i-1]), dp[i][j] = dp[i-1][j] æ”¾å…¥ç¬¬iä¸ª, dp[i][j] = dp[i-1][j-nums[i-1]]
    // base case: dp[..][0] = true;  dp[0][..] = 0
    // è¿™ä¸ªæœ‰å¿…è¦è§£é‡Šä¸€ä¸‹: èƒŒåŒ…æ²¡æœ‰ç©ºé—´çš„æ—¶å€™ï¼Œå°±ç›¸å½“äºè£…æ»¡äº†ï¼Œè€Œå½“æ²¡æœ‰ç‰©å“å¯é€‰æ‹©çš„æ—¶å€™ï¼Œè‚¯å®šæ²¡åŠæ³•è£…æ»¡èƒŒåŒ…ã€‚
    const sum = nums.reduce((t,v) => t + v, 0)
    console.log(sum)
    if(sum % 2 !== 0) return false
    const m = nums.length
    const target = sum / 2
    const dp = Array.from(new Array(m + 1), _ => new Array(target + 1).fill(false))
    for(let i = 0; i <= m; ++i) dp[i][0] = true
    for(let i = 1; i <= m; ++i) {
        for(let j = 1; j <= target; ++j) {
            if(nums[i - 1] > j) dp[i][j] = dp[i-1][j] // åªèƒ½ä¸è£…
            else dp[i][j] = dp[i-1][j] || dp[i-1][j-nums[i-1]] // å¯è£…å¯ä¸è£…
        }
    }
    return dp[m][target]
};
```

##### [1049.æœ€åä¸€å—çŸ³å¤´çš„é‡é‡ II](https://leetcode.cn/problems/last-stone-weight-ii/)

ä¸å¾—ä¸è¯´ï¼Œæ²¡æœ‰ä¸€å®šç»éªŒçš„äººå¾ˆéš¾æƒ³å¾—åˆ°è¿™é“é¢˜ä¹Ÿèƒ½è½¬ä¸º 01 èƒŒåŒ…é—®é¢˜ ğŸ™„ã€‚  
å…¶å®å°±æ˜¯ï¼šå°½é‡åˆ†ä¸ºä¸¤å †çŸ³å¤´ï¼Œè¿™ä¸¤ä¸ªå †é‡é‡å°½é‡é è¿‘ï¼Œä¹Ÿå°±æ˜¯è¯´è®©å…¶ä¸­ä¸€ä¸ªå †å°½é‡é è¿‘ `æ€»é‡ / 2`ã€‚

```JavaScript
/**
 * @param {number[]} stones
 * @return {number}
 */
var lastStoneWeightII = function(stones) {
    // å®šä¹‰ dp[i][j]: è¡¨ç¤º å‰iä¸ªçŸ³å¤´é‡é‡å’Œæœ€æ¥è¿‘ sum/2 çš„é‡é‡æ˜¯ dp[i][j], ç»“æœä¸ºsum-2*dp[m][sum/2]
    // é€’æ¨å…¬å¼:ä¸æ”¾å…¥æˆ–æ”¾å…¥å–æœ€å¤§, æ”¾å…¥éœ€è¦è¶³å¤Ÿçš„ç©ºé—´:
    // Math.max(dp[i-1][j], dp[i-1][j-stones[i-1]] + stones[i-1])
    // base case dp[0][..] = 0 dp[..][0] = 0
    const sum = stones.reduce((t,v) => t + v, 0)
    const target = sum >> 1
    const m = stones.length
    const dp = Array.from(new Array(m + 1), _ => new Array(target + 1).fill(0))
    for(let i = 1; i <= m; ++i) {
        for(let j = 1; j <= target; ++j) {
            if(stones[i -1] > j) dp[i][j] = dp[i-1][j] // ä¸èƒ½æ”¾å…¥
            else dp[i][j] = Math.max(dp[i-1][j], dp[i-1][j-stones[i-1]] + stones[i-1])
        }
    }
    return sum - 2 * dp[m][target]
};
```

## çŠ¶æ€å‹ç¼©

è¿™ä¸ªæ˜¯ä¼˜åŒ–æ–¹æ¡ˆï¼Œå¯ä»¥é™ä½ç©ºé—´å¤æ‚åº¦ï¼Œæ¨èçœ‹çœ‹ labuladong å¤§ä½¬çš„æ–‡ç« ã€‚ï¼ˆå› ä¸ºä»–çš„ç½‘ç«™ç»å¸¸å˜æ¢ï¼Œå°±ä¸è´´é“¾æ¥äº†ï¼‰ã€‚

**å¯¹äºçŠ¶æ€å‹ç¼©è¦æœ‰ä¸€å‰¯äºŒç»´ table çš„è„‘å›¾ï¼Œä»¥åŠå¯¹éå†æ–¹å‘æŒæ¡åˆ°ä½ã€‚**

```JavaScript
for (int i = n - 2; i >= 0; i--) {
    for (int j = i + 1; j < n; j++) {
        // çŠ¶æ€è½¬ç§»æ–¹ç¨‹
        if (s[i] == s[j])
            dp[i][j] = dp[i + 1][j - 1] + 2;
        else
            dp[i][j] = max(dp[i + 1][j], dp[i][j - 1]);
    }
}
```

å¯¹äºä¸Šæ–¹é€’æ¨å…¬å¼ï¼Œ`dp[i][j]` åªä¾èµ–äº `dp[i+1][j-1]`,`dp[i+1][j]`,`dp[i][j-1]`ï¼Œè§ä¸‹å›¾ã€‚

![](https://cdn.staticaly.com/gh/yokiizx/picgo@master/img/202210180953079.png)

è®°ä½ï¼š**ç©ºé—´å‹ç¼©çš„æ ¸å¿ƒæ€è·¯å°±æ˜¯ï¼Œå°†äºŒç»´æ•°ç»„ã€ŒæŠ•å½±ã€åˆ°ä¸€ç»´æ•°ç»„**ï¼š

![](https://cdn.staticaly.com/gh/yokiizx/picgo@master/img/202210181835977.png)

> åœ¨ä»£ç ä¸­å‘¢ï¼Œå°±æ˜¯æ— è„‘å»æ‰ dp[i][j] çš„ [i] è¿™ä¸ªç»´åº¦ï¼Œå»æ‰ç»´åº¦åï¼Œå¯èƒ½ä¼šäº§ç”Ÿè¦†ç›–é—®é¢˜ã€‚  
> ç„¶åæ€è€ƒæ¯ä¸ªä¸€ç»´ dp çš„å«ä¹‰ã€‚  
> æœ‰å¯èƒ½éœ€è¦è°ƒæ•´éå†é¡ºåºã€‚  
> base case ä¹Ÿè¦çœ‹ç€ä¿®æ”¹ï¼ŒåŒæ ·ä¹Ÿæ˜¯æŠ•å½±

ç»§ç»­ä¸Šé¢çš„ä¾‹å­ï¼š

i ä»ä¸‹å¾€ä¸Šéå†, j ä»å·¦å¾€å³éå†ï¼Œå³ i æ˜¯æ§åˆ¶éå†å±‚æ•°çš„ï¼Œi+1 å°±æ˜¯ä¸Šä¸€å±‚ã€‚

- dp[j]: åœ¨è¢«èµ‹å€¼ä¹‹å‰ä»£è¡¨ä¸Šä¸€è½®éå†çš„å€¼ï¼Œå³ dp[i+1][j]
- dp[j-1]: å› ä¸º j ä¹‹å‰çš„å·²ç»è¢«è¦†ç›–è¿‡äº†ï¼Œæ‰€ä»¥ä»£è¡¨ dp[i][j-1]
- ç°åœ¨å°±å·®ä¸€ä¸ª dp[i+1][j-1] äº†ï¼Œå› ä¸ºä¸€ç»´ï¼Œå®ƒè¢« dp[i][j-1] æ— æƒ…åœ°è¦†ç›–æ‰äº†ï¼Œå¯æ˜¯æŒ‰ç…§åŸæ¥çš„äºŒç»´ dp å¿…é¡»å¾—çŸ¥é“è¿™ä¸ªå€¼æ‰è¡Œï¼Œå’‹åŠå‘¢ï¼Ÿå…¶å®å¯ä»¥å¾ˆè‡ªç„¶çš„æƒ³åˆ°ï¼Œç”¨ä¸ªå˜é‡ç¼“å­˜ä½ä¸å°±å¥½äº†ï¼ŸYesï¼Œyou got it!

```JavaScript
for (int i = n - 2; i >= 0; i--) {
    // æ¯å±‚å¾ªç¯éƒ½å®šä¹‰ä¸€ä¸ªå˜é‡ååŠ©å‚¨å­˜ä¸€ç»´æ•°ç»„è¦æ±‚ j æ—¶ j-1 ä½ç½®è¢«è¦†ç›–å‰çš„å€¼
    let pre = 0;
    for (let j = i + 1; j < n; j++) {
        let temp = dp[j]; // dp[j] æ­¤æ—¶å–åˆ°çš„æ˜¯ä¸Šä¸€è½®éå†çš„å€¼ å³ dp[i+1][j]
        if (s[i] == s[j])
            // dp[i][j] = dp[i+1][j-1] + 2;
            dp[j] = pre + 2;
        else
            // dp[i][j] = max(dp[i+1][j], dp[i][j-1]);
            dp[j] = max(dp[j], dp[j - 1]);
        // ä¸‹è½®éå† j + 1ï¼Œ pre å°±æ˜¯ dp[i+1][j-1] äº†
        pre = temp;
    }
}
```

å¯èƒ½æœ‰ç‚¹æŠ½è±¡ï¼Œå†ä¸¾ä¸ªä¾‹å­:  
æ¯”å¦‚ j ç´¢å¼•ä» 1 å˜ä¸º 2 æ—¶ï¼Œä¸€ç»´æ•°ç»„ä¸­åˆå§‹åŒ– base case å·²ç»å æ»¡äº† 1,  
å½“éå†ç´¢å¼• 1 æ—¶, å…ˆæŠŠç´¢å¼• 1 çš„å€¼ç”¨ temp å­˜ä½, ç„¶åç´¢å¼• 1 ä¼šè¢«æ–°çš„å€¼ new å»è¦†ç›–æ‰,  
éå†åˆ°ç´¢å¼• 2 æ—¶, éœ€è¦æ ¹æ® dp[j-1] ä¹Ÿå°±æ˜¯åˆšåˆšè¢«è¦†ç›–æ‰åæ–°å€¼ new (åŸäºŒç»´ dp[i][j-1]) å’Œç´¢å¼• 1 ä¹‹å‰çš„å€¼ temp (åŸäºŒç»´ dp[i+1][j-1]) ä»¥åŠ ç´¢å¼• 2 è¢«èµ‹å€¼ä¹‹å‰çš„å€¼ dp[j] (åŸäºŒç»´ dp[i+1][j])æ¥æ¨å¯¼å‡ºã€‚å¦‚ä¸‹å›¾ ğŸ˜‚(ç”»çš„æœ‰ç‚¹ç®€çº¦äº†å“ˆ)

![](https://cdn.staticaly.com/gh/yokiizx/picgo@master/img/202210182331990.png)

æ›´ç®€å•çš„ï¼Œå¦‚æœ dp[i][j] åªä¸ dp[i-1][...] ç›¸å…³ï¼ŒæŠ•å½±åˆ°ä¸€ç»´ä¸Šï¼Œé‚£æ›´å¯ä»¥å‹ç¼©çŠ¶æ€å•¦ï¼Œè€Œä¸”è¿˜æ²¡æœ‰è¦†ç›–çš„é—®é¢˜ï¼Œåªæ˜¯æ»šåŠ¨æ•°ç»„éœ€è¦æ³¨æ„ä¸‹éå†æ–¹å‘ï¼Œæœ‰æ—¶å€™å­˜åœ¨ç»´åº¦çš„éå†é¡ºåºä¼šç›¸åï¼Œæ¯”å¦‚ dp[j] ä¾èµ–äº dp[j-1]æ—¶ï¼Œå¦‚æœæ­£åºéå†ï¼Œdp[j-1]ä¼šè¢«æ–°çš„å€¼ç»™è¦†ç›–ï¼Œè¿™å°±ä¸å¯¹äº†ï¼Œæ‰€ä»¥å€’ç€æ¥å°±å¥½äº†ã€‚

ä»¥ä¸Šæ˜¯çŠ¶æ€å‹ç¼©çš„æ€è·¯ï¼Œè¿˜æ˜¯éœ€è¦å¤šå¤šå®è·µã€‚å¦‚æœ‰ä¸å¯¹ï¼Œè¯·æŒ‡æ•™ã€‚
