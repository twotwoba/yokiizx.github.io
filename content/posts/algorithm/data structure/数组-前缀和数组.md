---
title: 'æ•°ç»„-å‰ç¼€å’Œæ•°ç»„'
date: 2023-02-19T15:57:07+08:00
tags: [Array]
series: [data structure, trick]
categories: [algorithm]
---

### æ¦‚å¿µ

åº”ç”¨åœºæ™¯ï¼šåœ¨åŸå§‹æ•°ç»„ä¸ä¼šè¢«ä¿®æ”¹çš„æƒ…å†µä¸‹ï¼Œ**å¿«é€Ÿã€é¢‘ç¹æŸ¥è¯¢æŸä¸ªåŒºé—´çš„ç´¯åŠ å’Œ**ã€‚

æ ¸å¿ƒæ€è·¯ï¼šå¼€è¾Ÿæ–°æ•°ç»„ `preSum[i]` æ¥å­˜å‚¨åŸæ•°ç»„ `nums[0..i-1] `çš„ç´¯åŠ å’Œï¼Œ`preSum[0] = 0`ã€‚è¿™æ ·ï¼Œå½“æ±‚åŸæ•°ç»„åŒºé—´å’Œå°±æ¯”è¾ƒå®¹æ˜“äº†ï¼ŒåŒºé—´ `[i..j]` çš„å’Œç­‰äº `preSum[j+1] - preSum[i]` çš„ç»“æœå€¼ã€‚

```JavaScript
const preSum = [0]
preSum[i] = preSum[i - 1] + nums[i - 1]
// æŸ¥è¯¢
preSum[r + 1] - preSum[l]

// æˆ–è€…
const preSum = [nums[0]]
preSum[i] = preSum[i-1] + nums[i]
// æŸ¥è¯¢
preSum[r] - preSum[l-1] // éœ€è¦åˆ¤æ–­ l ä¸º 0 çš„æƒ…å†µï¼Œç›´æ¥è¿”å› preSum[r]ï¼Œè¿™ç§çš„åŠ£åŠ¿æ˜¯éœ€è¦åˆ¤æ–­è¾¹ç•Œæ¡ä»¶
```

### æ„é€ ï¼š[lc.303 åŒºåŸŸå’Œæ£€ç´¢-æ•°ç»„ä¸å¯å˜](https://leetcode.cn/problems/range-sum-query-immutable/)

```JavaScript
/**
 * @param {number[]} nums
 */
var NumArray = function(nums) {
    this.preSum = [0] // preSum é¦–ä½ä¸º0 ä¾¿äºè®¡ç®—
    for(let i = 1; i <= nums.length; ++i) {
        this.preSum[i] = this.preSum[i - 1] + nums[i -1]
    }
};

/**
 * @param {number} left
 * @param {number} right
 * @return {number}
 */
NumArray.prototype.sumRange = function(left, right) {
    return this.preSum[right + 1] - this.preSum[left]
};

/**
 * Your NumArray object will be instantiated and called as such:
 * var obj = new NumArray(nums)
 * var param_1 = obj.sumRange(left,right)
 */
```

---

ä¸Šæ–¹é‚£ç§äº‹å®˜è§£ç»™å‡ºçš„é€»è¾‘ï¼Œä¸‹é¢è¿™ç§å¯èƒ½æ›´å®¹æ˜“ç†è§£ä¸€äº›ã€‚

```js
/**
 * @param {number[]} nums
 */
var NumArray = function (nums) {
  this.preSums = [nums[0]]
  for (let i = 1; i < nums.length; ++i) {
    this.preSums[i] = this.preSums[i - 1] + nums[i]
  }
}

/**
 * @param {number} left
 * @param {number} right
 * @return {number}
 */
NumArray.prototype.sumRange = function (left, right) {
  if (left === 0) return this.preSums[right]
  return this.preSums[right] - this.preSums[left - 1]
}

/**
 * Your NumArray object will be instantiated and called as such:
 * var obj = new NumArray(nums)
 * var param_1 = obj.sumRange(left,right)
 */
```

### æ„é€ ï¼š[lc.304 äºŒç»´åŒºåŸŸå’Œæ£€ç´¢-çŸ©é˜µä¸å¯å˜](https://leetcode.cn/problems/range-sum-query-2d-immutable/)

```js
/**
 * @param {number[][]} matrix
 */
var NumMatrix = function (matrix) {
  const row = matrix.length
  const col = matrix[0].length
  this.sums = Array.from(Array(row + 1), () => Array(col + 1).fill(0))
  for (let i = 0; i < row; ++i) {
    for (let j = 0; j < col; ++j) {
      this.sums[i + 1][j + 1] =
        this.sums[i + 1][j] + this.sums[i][j + 1] - this.sums[i][j] + matrix[i][j]
    }
  }
  console.log(this.sums)
}

/**
 * @param {number} row1
 * @param {number} col1
 * @param {number} row2
 * @param {number} col2
 * @return {number}
 */
NumMatrix.prototype.sumRegion = function (row1, col1, row2, col2) {
  return (
    this.sums[row2 + 1][col2 + 1] -
    this.sums[row1][col2 + 1] -
    this.sums[row2 + 1][col1] +
    this.sums[row1][col1]
  )
}

/**
 * Your NumMatrix object will be instantiated and called as such:
 * var obj = new NumMatrix(matrix)
 * var param_1 = obj.sumRegion(row1,col1,row2,col2)
 */
```

### lc.523 è¿ç»­çš„å­æ•°ç»„å’Œ

è¿™é“é¢˜æœ‰ç‚¹æ„æ€çš„ï¼Œé¦–å…ˆè¦çŸ¥é“ä¸€ä¸ªæ•°å­¦çŸ¥è¯†ï¼š**åŒä½™å®šç†ï¼š(a - b) % k == 0ï¼Œåˆ™ a % k == b % k**ã€‚

æ ¹æ®é¢˜æ„ï¼Œéœ€è¦è·å–åˆ°çš„ä¿¡æ¯æ˜¯ï¼š**(preSum[j] - preSum[i]) % k === 0**ï¼Œå¦‚è¿‡å­˜åœ¨åˆ™è¿”å› trueï¼Œé‚£ä¹ˆå°±å¯ä»¥è½¬åŒ–ä¸ºï¼š**å¯»æ‰¾æ˜¯å¦æœ‰ä¸¤ä¸ªå‰ç¼€å’Œèƒ½ % k åï¼Œä½™æ•°ç›¸åŒçš„é—®é¢˜äº†~**ï¼Œé‚£å°±å¾ˆè‡ªç„¶æƒ³åˆ°ç”¨å“ˆå¸Œè¡¨æ¥å­˜å‚¨ `{ä½™æ•°ï¼šç´¢å¼•}`äº†ï¼Œä¸ç„¶è¿™é¢˜è¿˜çœŸæŒºéš¾æƒ³çš„~ å†ä¸€æ¬¡ respect æ•°å­¦ï¼

```js
var checkSubarraySum = function (nums, k) {
  if (nums.length <= 1) return false
  const map = { 0: -1 }
  let preSum = 0
  for (let i = 0; i < nums.length; ++i) {
    preSum += nums[i]
    let b = preSum % k
    if (map[b] >= -1) {
      // å·¦å¼€å³é—­åŒº
      if (i - map[b] >= 2) {
        return true
      }
    } else {
      map[b] = i
    }
  }
  return false
}
```

**Butï¼è¯·æ³¨æ„ï¼Œæœ‰å‘**ï¼Œä¸Šé¢çš„ç®—æ³•æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œç„¶è€Œæ•°æ®é‡ä¸€ä¸‹ï¼Œä¸”æ¯ä¸ªæ•°éƒ½å¾ˆå¤§ï¼Œåˆ™æœ‰å¯èƒ½æœ‰æ•°å­—æº¢å‡ºçš„é£é™©ï¼ŒåŠ›æ‰£ä¸Šæœ‰ä¸ªæµ‹è¯•ç”¨ä¾‹å°±æ˜¯è¿™æ ·çš„è¶…å‡ºèŒƒå›´äº†~~~ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦ç”¨**ä½™æ•°å»ç´¯åŠ ï¼**

```js
/**
 * @param {number[]} nums
 * @param {number} k
 * @return {boolean}
 */
var checkSubarraySum = function (nums, k) {
  if (nums.length <= 1) return false
  // æ³¨æ„è¿™é‡Œï¼šåˆå§‹ key ä¸º 0ï¼Œvalue ä¸º -1ï¼Œæ˜¯ä¸ºäº†è®¡ç®—ç¬¬ä¸€ä¸ªå¯ä»¥æ•´é™¤ k çš„å­æ•°ç»„é•¿åº¦
  const map = { 0: -1 }
  let remainder = 0
  for (let i = 0; i < nums.length; ++i) {
    remainder = (remainder + nums[i]) % k
    if (map[remainder] >= -1) {
      if (i - map[remainder] >= 2) {
        // å·¦å¼€å³é—­åŒºé—´
        return true
      }
    } else {
      map[remainder] = i
    }
  }
  return false
}
```

### lc.525 è¿ç»­æ•°ç»„

ç»ï¼Œå¯ä»¥æŠŠ 0 çœ‹æˆ -1ï¼Œè½¬ä¸ºæ±‚å‰ç¼€å’Œä¸º 0 çš„æƒ…å†µã€‚å®ç°ä¸Šç”¨ä¸€ä¸ª counter å˜é‡å³å¯ã€‚

```js
/**
 * @param {number[]} nums
 * @return {number}
 */
var findMaxLength = function (nums) {
  if (nums.length <= 1) return 0
  let max = 0
  const map = { 0: -1 }
  let counter = 0
  for (let i = 0; i < nums.length; ++i) {
    nums[i] === 1 ? ++counter : --counter
    // å“ˆå¸Œè¡¨ä¸­å°±æœ‰è®°å½•ï¼Œè¡¨æ˜æ­¤åˆ» åŒºé—´å‰ç¼€å’Œä¹‹å·® ä¸­ 0 å’Œ 1 çš„æ•°é‡ç›¸ç­‰
    // ä¸¾ä¸ªä¾‹å­ [1,1,1,0(-1)] å¯¹åº”çš„å‰ç¼€å’Œä¸º  1,2,3,2ï¼Œ é‚£ä¹ˆ (1, 3] åŒºé—´ 1 ä¸ª 0 å’Œ 1 ä¸ª 1ï¼Œé•¿åº¦ä¸º 3-1=2
    if (map[counter] >= -1) {
      max = Math.max(max, i - map[counter])
    } else {
      map[counter] = i
    }
  }
  return max
}
```

ä¸Šé¢ä¸¤é¢˜ï¼Œæœ‰ä¸€ä¸¢ä¸¢ç±»ä¼¼ï¼Œæ¯”å¦‚ä¸€ç§æ„Ÿè§‰ï¼Œå½“é€šè¿‡å“ˆå¸Œè¡¨æ¥å­˜å‚¨ `{need: ç´¢å¼•}` æ—¶ï¼Œéƒ½éœ€è¦è®¾å®š map åˆå§‹ä¸º `{0: -1}`ï¼Œå¯ä»¥ç†è§£ä¸º**ç©ºçš„å‰ç¼€çš„å…ƒç´ å’Œä¸º 0ï¼Œç©ºçš„å‰ç¼€çš„ç»“æŸä¸‹æ ‡ä¸º âˆ’1**ã€‚å†ä¸€ä¸ªå‰ç¼€å’Œä¹‹å·®åŒºé—´ä¸ºå·¦å¼€å³é—­åŒºé—´ `(i, j]`ï¼Œæ‰€ä»¥é•¿åº¦ä¸º j - iã€‚

### [lc.528 æŒ‰æƒé‡éšæœºé€‰æ‹©](https://leetcode.cn/problems/random-pick-with-weight/)

ç¬¬ä¸€æ¬¡ç¢°è§é“é¢˜å¤§æ¦‚ç‡æ˜¯æ²¡è¯»æ‡‚å®ƒåˆ°åº•æ˜¯ä¸ªå•¥æ„æ€çš„ ğŸ˜‚ï¼Œçœ‹äº†é¢˜è§£åï¼Œè±ç„¶å¼€æœ—ï¼ˆæ€ä¹ˆæ¯æ¬¡éƒ½æ˜¯è¿™ç§æ„Ÿè§‰ï¼Œf\*\*kï¼ï¼‰

é¦–å…ˆå°±æ˜¯å‰ç¼€å’Œ `[0...arr.length-1]` æ˜¯æ€»çš„å‰ç¼€å’Œï¼ŒæŠŠè¿™ä¸ªæ€»å‰ç¼€å’Œçœ‹æˆæ˜¯ä¸€æŠŠå°ºå­ï¼Œé‚£ä¹ˆæ¯ä¸ªæ•°å­—çš„æƒé‡å¯ä»¥çœ‹æˆæ˜¯åœ¨è¿™æŠŠå°ºå­ä¸Šå ç”¨çš„é•¿åº¦ã€‚ç”±æ­¤ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªé‡è¦çš„ç‰¹ç‚¹ï¼š**æ¯ä¸ªé•¿åº¦åŒºé—´çš„å³è¾¹ç•Œæ˜¯å½“å‰æ•°å­— i çš„å‰ç¼€å’Œï¼Œå·¦è¾¹ç•Œæ˜¯ä¸Šä¸€ä¸ªåŒºé—´çš„å‰ç¼€å’Œå³è¾¹ç•Œ + 1**

ä¾‹å¦‚ w=[3,1,2,4]æ—¶ï¼Œæƒé‡ä¹‹å’Œ total=10ï¼Œé‚£ä¹ˆæˆ‘ä»¬æŒ‰ç…§ [1,3],[4,4],[5,6],[7,10]å¯¹ [1,10] è¿›è¡Œåˆ’åˆ†ï¼Œä½¿å¾—å®ƒä»¬çš„é•¿åº¦æ°å¥½ä¾æ¬¡ä¸º 3,1,2,4ã€‚

```JavaScript
/**
 * @param {number[]} w
 */
var Solution = function (w) {
  this.preSum = [0]
  for(let i = 0; i < w.length; ++i) {
      this.preSum[i + 1] = this.preSum[i] + w[i]
  }
}

/**
 * @return {number}
 */
Solution.prototype.pickIndex = function() {
    // éšæœºæ•° randomX åº”è¯¥è½åœ¨ pre[i] >= randomX >= pre[i] - w[i] + 1
    const randomX = Math.random() * (this.preSum[this.preSum.length - 1]) + 1 | 0
    // åˆå› ä¸º pre[i] æ˜¯å•è°ƒé€’å¢çš„ï¼Œé‚£ä¹ˆ pre[i] >= randomX è½¬åŒ–ä¸ºäº†ä¸€ä¸ªäºŒåˆ†æœç´¢å·¦è¾¹ç•Œçš„é—®é¢˜äº†
    const binarySearchlow = (x) => {
        let low = 1, high = this.preSum.length
        while(low < high) {
            const mid = low + (high - low >> 1)
            if(this.preSum[mid] < x) { // target > mid æ¥ç€å»æœç´¢å³è¾¹ï¼Œlow è¿›åŒ–
                low = mid + 1
            }else if(this.preSum[mid] > x){ // target < mid æ¥ç€å»æœç´¢å·¦è¾¹ï¼Œhigh è¿›åŒ–
                high = mid
            }else if(this.preSum[mid] === x) { // target === mid, å› ä¸ºæ˜¯æœç´¢å·¦è¾¹ç•Œï¼Œæ‰€ä»¥æ’é™¤ midï¼Œ high = mid ï¼ˆç‰¢è®°å¯è¡Œè§£åŒºé—´ä¸º [low...high)ï¼‰
                high = mid
            }
        }
        return low
    }

    return binarySearchlow(randomX) - 1 // æˆ‘ä»¬å®šä¹‰çš„å‰ç¼€å’Œçš„ç´¢å¼•æ¯”åŸæ•°ç»„ç´¢å¼•å¤§ 1ï¼Œæ‰€ä»¥è¦å‡å» 1ï¼ŒæŒ‰ç…§å®˜è§£å®šä¹‰çš„å‰ç¼€å’Œå°±ä¸éœ€è¦äº†
};
```

### [lc.560 å’Œä¸º k çš„å­æ•°ç»„](https://leetcode.cn/problems/subarray-sum-equals-k/)

```JavaScript
/**
 * @param {number[]} nums
 * @param {number} k
 * @return {number}
 */
var subarraySum = function(nums, k) {
    const preSum = [0]
    for(let i = 1; i <= nums.length; ++i) {
        preSum[i] = preSum[i-1] + nums[i-1]
    }
    let count = 0
    // éå†å‡ºæ‰€æœ‰åŒºé—´
    for(let i = 0; i < nums.length; ++i) {
        for(let j = i; j < nums.length; ++j) {
            preSum[j+1] - preSum[i] === k && ++count
        }
    }
    return count
};
```

è¿™æ ·åšèƒ½å¾—åˆ°æ­£ç¡®ç»“æœï¼Œä½†æ˜¯å¹¶ä¸èƒ½ ACï¼Œæ—¶é—´å¤æ‚åº¦ O(n^2)ï¼Œä¸çŸ¥é“è°æäº†ä¸ªæ¶å¿ƒçš„æµ‹è¯•ç”¨ä¾‹ã€‚ã€‚ã€‚ä¼šè¶…æ—¶~

çœ‹äº†ä¸‹é¢˜è§£ï¼Œå¯ä»¥ä½¿ç”¨å“ˆå¸Œè¡¨è¿›è¡Œä¼˜åŒ–

```js
var subarraySum = function (nums, k) {
  const map = { 0: 1 }
  let preSum = 0
  let res = 0
  for (const num of nums) {
    preSum += num
    if (map[preSum - k]) {
      res += map[preSum - k]
    }

    if (map[preSum]) {
      map[preSum]++
    } else {
      map[preSum] = 1
    }
  }

  return res
}
```

### lc.724 å¯»æ‰¾æ•°ç»„çš„ä¸­å¿ƒä¸‹æ ‡ easy

```js
/**
 * @param {number[]} nums
 * @return {number}
 */
var pivotIndex = function (nums) {
  const preSum = [0]
  for (let i = 0; i < nums.length; ++i) {
    preSum[i + 1] = preSum[i] + nums[i]
  }
  console.log(preSum)
  for (let i = 1; i < preSum.length; ++i) {
    // æ ¹æ®é¢˜æ„å¾ˆå®¹æ˜“å†™å‡ºæ¥
    if (preSum[i - 1] === preSum[preSum.length - 1] - preSum[i]) {
      return i - 1 // å¦‚æœä½¿ç”¨äº† 0 è™šæ‹ŸèŠ‚ç‚¹ï¼Œé‚£ä¹ˆå‰ç¼€å’Œçš„ç´¢å¼• == åŸæ•°ç»„çš„çš„ç´¢å¼• + 1 çš„
    }
  }
  return -1
}
```

### lc.918 ç¯å½¢æ•°ç»„çš„æœ€å¤§å’Œ NICE!

è¿™é“é¢˜å¾ˆæœ‰æ„æ€ï¼Œæœ‰å¤šé‡æ–¹æ³•å¯ä»¥è§£ç­”ã€‚

#### 1. åŠ¨æ€è§„åˆ’ï¼Œæ˜¯ lc.53 çš„è¿›é˜¶ç‰ˆæœ¬

#### 2. æ»‘åŠ¨çª—å£+å•è°ƒé˜Ÿåˆ—+å‰ç¼€å’Œ

å°†æ•°ç»„å»¶é•¿ä¸€å€ï¼Œå¯ä»¥çœ‹æˆæ˜¯ä¸¤ä¸ªæ•°ç»„æ‹¼æ¥èµ·æ¥ï¼Œé—®é¢˜è½¬åŒ–ä¸ºï¼šåœ¨ 2n çš„æ•°ç»„ä¸Šï¼Œå¯»æ‰¾æœ€å¤§å­æ•°ç»„å’Œï¼Œä¸”æ•°ç»„çš„é•¿åº¦ä¸è¶…è¿‡ nï¼ˆç”¨æ»‘åŠ¨çª—å£æ§åˆ¶ï¼‰

```js
var maxSubarraySumCircular = function (nums) {
  const n = nums.length
  const queue = []
  let pre = nums[0],
    res = nums[0]
  queue.push([0, pre]) // å•è°ƒé˜Ÿåˆ—ä¿å­˜ [index, preSum]
  for (let i = 1; i < 2 * n; i++) {
    // æ ¹æ®ç´¢å¼•æ§åˆ¶ çª—å£å¤§å°
    while (queue.length !== 0 && i - queue[0][0] > n) {
      queue.shift()
    }
    pre += nums[i % n]
    res = Math.max(res, pre - queue[0][1]) // æ±‚å½“å‰çª—å£å†…çš„ æœ€å¤§å­æ•°ç»„å’Œï¼Œ é‚£ä¹ˆå•è°ƒé˜Ÿåˆ—é¡¶éƒ¨åº”è¯¥æ˜¯è¶Šå°è¶Šå¥½
    // æ‰€ä»¥å½“æ–°çš„å‰ç¼€å’Œå°äºç­‰äºå•è°ƒé˜Ÿåˆ—é‡Œçš„å‰ç¼€å’Œæ—¶ï¼Œç›´æ¥â€œå‹æ‰â€ -- å³å•è°ƒé˜Ÿåˆ—å°¾éƒ¨ popï¼Œå¹¶ push æ–°çš„ preSum
    while (queue.length !== 0 && queue[queue.length - 1][1] >= pre) {
      queue.pop()
    }
    queue.push([i, pre])
  }
  return res
}
```

#### 3. æœ€ä¼˜è§£ ç©ºé—´å¤æ‚åº¦ O(1)

è§£é¢˜æ€è·¯ï¼šåˆ†ä¸¤ç§æƒ…å†µï¼Œä¸€ç§ä¸ºæ²¡æœ‰è·¨è¶Šè¾¹ç•Œçš„æƒ…å†µï¼Œä¸€ç§ä¸ºè·¨è¶Šè¾¹ç•Œçš„æƒ…å†µ

- æ²¡æœ‰è·¨è¶Šè¾¹ç•Œçš„æƒ…å†µç›´æ¥æ±‚å­æ•°ç»„çš„æœ€å¤§å’Œå³å¯ï¼›
- è·¨è¶Šè¾¹ç•Œçš„æƒ…å†µå¯ä»¥å¯¹æ•°ç»„æ±‚å’Œå†å‡å»æ— ç¯çš„å­æ•°ç»„çš„æœ€å°å’Œï¼Œå³å¯å¾—åˆ°è·¨è¶Šè¾¹ç•Œæƒ…å†µä¸‹çš„å­æ•°ç»„æœ€å¤§å’Œï¼›

  æ±‚ä»¥ä¸Šä¸¤ç§æƒ…å†µçš„å¤§å€¼å³ä¸ºç»“æœï¼Œå¦å¤–éœ€è¦è€ƒè™‘å…¨éƒ¨ä¸ºè´Ÿæ•°çš„æƒ…å†µ

```js
/**
 * @param {number[]} nums
 * @return {number}
 */
var maxSubarraySumCircular = function (nums) {
  // 1. æ²¡æœ‰è·¨è¾¹ç•Œï¼Œç›´æ¥æ±‚  å­æ•°ç»„çš„æœ€å¤§å’Œ
  // 2. è·¨äº†è¾¹ç•Œï¼Œç­‰ä»·ä¸æ±‚  æœ€å¤§ï¼ˆå‰ç¼€å’Œ - å­æ•°ç»„çš„æœ€å°å’Œï¼‰
  // ä¸¤ç§æƒ…å†µå–æœ€å¤§é‚£ä¸ªå³å¯
  let preSum = nums[0]
  let preMax = nums[0]
  let preMin = nums[0]
  let resMax = nums[0]
  let resMin = nums[0]

  for (let i = 1; i < nums.length; ++i) {
    preSum += nums[i]
    preMax = Math.max(preMax + nums[i], nums[i])
    resMax = Math.max(resMax, preMax)
    preMin = Math.min(preMin + nums[i], nums[i])
    resMin = Math.min(resMin, preMin)
  }
  // æœ€å¤§éƒ½å°äº 0 äº†ï¼Œæ„å‘³ç€æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ éƒ½å°äº 0
  if (resMax < 0) return resMax // è€ƒè™‘å…¨éƒ¨ä¸ºè´Ÿæ•°çš„æƒ…å†µ
  return Math.max(resMax, preSum - resMin)
}
```

### lc.974 å’Œå¯è¢« k æ•´é™¤çš„å­æ•°ç»„

```js

```

---

### å‰ç¼€ç§¯ä¸åç¼€ç§¯ï¼š[lc.238 é™¤ä»¥è‡ªèº«ä»¥å¤–çš„æ•°ç»„çš„ä¹˜ç§¯](https://leetcode.cn/problems/product-of-array-except-self/)

æ•°ç»„ numsï¼Œæ±‚é™¤äº† nums[i] ä¹‹å¤–æ‰€æœ‰æ•°å­—çš„ä¹˜ç§¯ === `preMulti * postMulti`

```js
/**
 * @param {number[]} nums
 * @return {number[]}
 */
var productExceptSelf = function (nums) {
  const n = nums.length
  const front = new Array(n)
  const end = new Array(n)
  front[0] = 1
  end[n - 1] = 1
  for (let i = 1; i < n; i++) {
    front[i] = front[i - 1] * nums[i - 1]
  }
  for (let i = n - 2; i >= 0; i--) {
    end[i] = end[i + 1] * nums[i + 1]
  }
  const res = []
  for (let i = 0; i < n; i++) {
    res[i] = front[i] * end[i]
  }
  return res
}
```

ä¼˜åŒ–

```js
var productExceptSelf = function (nums) {
  // ä¼˜åŒ– åŠ¨æ€æ„é€ å‰ç¼€å’Œåç¼€ ä¸€æ¬¡éå†, è®©è¿”å›æ•°ç»„è‡ªèº«æ¥æ‰¿è½½
  const res = new Array(nums.length).fill(1)
  // æ±‚å‡ºå·¦ä¾§æ‰€æœ‰ä¹˜ç§¯
  for (let i = 1; i < nums.length; i++) {
    res[i] = nums[i - 1] * res[i - 1]
  }
  // å³ä¾§çš„ä¹˜ç§¯éœ€è¦åŠ¨æ€çš„æ±‚å‡º, å€’å™éå†
  let r = 1
  for (let i = nums.length - 1; i >= 0; --i) {
    res[i] = res[i] * r
    r *= nums[i]
  }
  return res
}
```

> lc.327 lc.862 ä¸¤é“ hard é¢˜ï¼Œåç»­æœ‰æ—¶é—´å†çœ‹çœ‹ ğŸ˜
