---
title: 'ä¼˜å…ˆé˜Ÿåˆ—'
date: 2022-09-23T14:43:36+08:00
series: [data structure]
categories: [algorithm]
---

JavaScript ä¸­æ²¡æœ‰å†…ç½®ä¼˜å…ˆé˜Ÿåˆ—è¿™ä¸ªæ•°æ®ç»“æ„ï¼Œéœ€è¦è‡ªå·±æ¥å®ç°ä¸€ä¸‹~ğŸ‘»

- ç²¾é«“ä¹‹ä¸€ï¼š**æ•°ç»„çš„ç¬¬ä¸€ä¸ªç´¢å¼• 0 ç©ºç€ä¸ç”¨**
- ç²¾é«“ä¹‹äºŒï¼šæ’å…¥æˆ–è€…åˆ é™¤å…ƒç´ çš„æ—¶å€™ï¼Œéœ€è¦å…ƒç´ è‡ªåŠ¨æ’åº

```JavaScript
class PriorityQueue {
  constructor(data, cmp) {
    // ä½¿ç”¨å †é¡¶å®ˆå«ï¼Œæ›´æ–¹ä¾¿ä¸Šæµ®æ—¶çˆ¶èŠ‚ç‚¹çš„è·å– p = i >> 1, å­èŠ‚ç‚¹æœ¬èº«å°±æ¯”è¾ƒå¥½è·å–å€’æ˜¯æ— æ‰€è°“
    this.data = [null, ...data];
    this.cmp = cmp;
    for (let i = this.data.length >> 1; i > 0; --i) this.down(i); // å¯¹é™¤æœ€åä¸€å±‚çš„å­èŠ‚ç‚¹è¿›è¡Œå †åŒ–åˆå§‹åŒ–
  }
  get size() {
    return this.data.length - 1;
  }
  swap(i, j) {
    [this.data[i], this.data[j]] = [this.data[j], this.data[i]];
  }
  // é€’å½’ä¸Šæµ®å’Œä¸‹æ²‰
  down(i) {
    if (i === this.size) return;
    const j = i;
    const l = i << 1;
    const r = l + 1;
    if (l <= this.size && this.cmp(this.data[i], this.data[l])) i = l;
    if (l <= this.size && this.cmp(this.data[i], this.data[r])) i = r;
    if (i !== j) {
      this.swap(i, j);
      this.down(i);
    }
  }
  up(i) {
    if (i === 1) return;
    const p = i >> 1;
    if (this.cmp(this.data[p], this.data[i])) {
      this.swap(p, i);
      this.up(p);
    }
  }
  push(val) {
    this.up(this.data.push(val) - 1); // åŠ å…¥é˜Ÿåˆ—åè¿›è¡Œä¸Šæµ®å¤„ç†
  }
  poll() {
    this.swap(1, this.size); // å…ˆäº¤æ¢é¦–å°¾ï¼Œæ–¹ä¾¿åé¢å‡ºé˜Ÿ
    const top = this.data.pop();
    this.down(1);
    return top;
  }
}
```

```javascript
/**
 * éé€’å½’ç‰ˆæœ¬æ›´å¥½ç†è§£
 */
class PriorityQueue {
  constructor(data, comp) {
    this.data = data
    this.comp = comp
    for (let i = data.length >> 1; i >= 0; --i) {
      this.down(i)
    }
  }
  down(i) {
    let left = 2 * i + 1
    while (left < this.size()) {
      let min = left + 1 && this.comp(this.data[left + 1], this.data[left]) ? left + 1 : left // ç»†èŠ‚ï¼Œleft+1 åœ¨å‰
      min = this.comp(this.data[i], this.data[min]) ? i : min
      if (min === i) {
        break
      }
      this.swap(i, min)
      i = min
      left = 2 * i + 1
    }
  }
  up(i) {
    while (i >= 0 && this.comp(this.data[(i - 1) >> 1], this.data[i])) {
      this.swap((i - 1) >> 1, i)
      i = (i - 1) >> 1
    }
  }
  push(val) {
    this.up(this.data.push(val) - 1)
  }
  poll() {
    this.swap(0, this.size() - 1)
    const top = this.data.pop()
    this.down(0)
    return top
  },
  size() {
    return this.data.length
  }
  swap(i, j) {
    const temp = this.data[i]
    this.data[i] = this.data[j]
    this.data[j] = temp
  }
}
```

æµ‹è¯•ï¼š

```js
const pq = new PriorityQueue([4, 2, 3, 5, 6, 1, 7, 8, 9], (a, b) => a - b > 0)
console.log('ğŸ“ŒğŸ“ŒğŸ“Œ ~ pq', pq)
console.log(pq.pop())
console.log(pq.pop())
console.log(pq.pop())
console.log(pq.pop())
console.log(pq.pop())
console.log(pq.pop())
console.log(pq.pop())
console.log(pq.pop())
console.log(pq.pop())
```

åœºæ™¯ï¼š

- åˆå¹¶ K ä¸ªæœ‰åºé“¾è¡¨
- å †æ’åºä¹Ÿæœ‰å…¶ä¸­çš„æ€æƒ³
