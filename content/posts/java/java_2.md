---
title: 'Java_2'
date: 2023-06-15T20:12:28+08:00
tags: []
series: [java]
categories: [study notes]
---

## JAVA 基本数据类型

java 中有八大基础数据类型，和 js 的略有不同，Java 是强类型语言，每种类型在声明的时候就需要开辟出空间（需要注意每种类型的占空间大小）：

- byte：1 个字节，最小整数类型
- boolean：1 个字节，只能是 true 或 false，不能为 0、1 啥的
- char：2 个字节，单个字符，注意使用`单引号`  
  也可以是数字 -- 输出对应的 `ASCII` 码，本质上是数字，可以参加运算
- short：2 个字节
- int：4 个字节，（默认）
- long：8 个字节，_可以数字后加 'l' 或 'L'_
- float：4 个字节，单精度，[-3.403E38, 3,403E38]，_可以在数字后加 'f' 或 'F'_
- double：8 个字节，双精度，[-1.798E308, 1.798E308]，（默认）  
  浮点数 = 符号位 + 指数位 + 尾数位; 尾数部分可能丢失，造成精度损失。当计算出的浮点数和声明的浮点数比较时，应当是在一定范围内比较。

> 注：`1 byte = 8 bit`，也就是对应有 8 位数字的二进制数，所以 1 个字节可以存储的数据范围是 `[-128, 127]`，即 `[1000 0000, 0111 1111]`。PS：计算机世界负数按照补码来取的，`1000 0000(原码)` -> `1111 1111(反码)` ---> +1 `1000 0000(补码)` -> `-0`，`-0` 无意义，被利用起来规定为 `-128`。

### 基本类型转换

#### 自动类型转换

java 程序进行赋值或者运算时，精度小的会自动转换为精度大的。

两条线路：

- `char -> int -> long -> float -> double`
- `byte -> short -> int -> long -> float -> double`

```java
int a = 'a' // char -> int
double b = 97 // int -> double
```

> 注意：char, byte, short 之间不能自动转换，但是可以参与计算，计算时会首**先转换到 int 类型**

另，long 和 float 类型之后需要加 l 或 f 往往是因为在计算过程中，数字会被转换成容量最大的数据类型再进行计算。

#### 强制类型转换

数据的类型从大转小，就需要强制转换，一般不推荐，会产生精度损失或数据溢出的问题，除非很确定需要的是什么。

```java
int a = (int)8.88
```

在复合赋值运算符中，就会进行强制类型转换，如：

```java
byte a = 1
a += 1   // 实际上 a = (byte)(a + 1)
a++ // 也会强制转换
```

## JAVA 引用类型

- 类 class：Java 面向对象的基石，可以看成是自定义的数据类型
- 接口 interface: TODO
- 数组 []：与 js 数组不同，Java 数组存放的是`同一类型的数据`

> 与 JS 一致，基本类型也是值拷贝，引用类型是引用传递，拷贝的是物理地址。

### 类

#### 成员变量(属性)

> [Java 基础——成员变量、局部变量和静态变量的区别](https://blog.csdn.net/haovip123/article/details/43883109)

> 关注一下通过类创建对象时，JVM 的内存状态：
> ![](https://cdn.staticaly.com/gh/yokiizx/picgo@master/img/202306262325036.png)

可见，JVM 内存管理主要分为 3 个部分：

- 栈：基础类型
- 堆：引用类型
- 方法区：加载类信息和常量池，详细了解--[你知道 JVM 的方法区是干什么用的吗？](https://zhuanlan.zhihu.com/p/166190558)

这篇文章也很不错：[String 在内存中如何存储（Java）](https://blog.csdn.net/iceyung/article/details/106202654)

#### 成员方法(方法)

其实和 JS 没啥太大的区别，函数（方法）在执行的时候都会开辟栈空间，形参会在栈空间内创建变量与入参的联系，需要注意的是内存中的关系，区分基础类型和引用类型，老生常谈了，注意下一点就理解的差不多了：

```js
// 为了方便用JS演示
const obj = {
  age: 200
}

function test(obj) {
  // obj.age = 100 // is ok
  obj = null // what happen?
}

test(obj)

console.log('📌📌📌 ---', obj.age) // 会报错吗?---不会!
// obj = null 只是打断了栈空间的obj与入参即堆中obj的联系
```

---

##### 重载(overload)

没啥好说的，JS 中形参 `1. 不在乎类型，2. 不在乎数量`，很随意，JAVA 恰恰都把控很严。

因此为了防止重复起名的麻烦，JAVA 引入了重载的概念，允许同一个类中，有多个同名方法，但是参数列表不一致。

---

###### 可变参数

重载中也难免会有冗余的情况，比如就只是计算 n 个数的和，那么入参可以是 n 个，每个都重载一个方法会很 low~，那么就可以使用`可变参数`了

```java
public int sum(int...nums) {
  // ... 与js的剩余参数类似，也必须在最后~
}
```

#### 构造器

JAVA 中的构造器不是用来创造对象，是用来`完成对象的初始化`。有以下特点：

1. `方法名与类名一致`
2. 无返回值(不需要返回类型)
3. 构造器也可以重载

#### this

JAVA 的 this 和 JS 的 this 还是略有不同的~，其实我感觉比 JS 还好理解一点。

> this 就是指当前类型的实例对象。可以想象成实例对象内部有个隐藏的属性 this 指向自身的内存地址。可以通过 hashCode(物理地址的) 来简单证明

一个注意点：构造器中调用另一个构造器的语法 `this(...args)`，且必须在第一行。

```java
public Cons (){
  this(18);
}
public Cons(int age) {
  this.age = age;
}
```

### 接口

TODO

### JAVA 的数组

#### 两种创建方式：

```java
// 动态创建
数据类型[] name = new 数据类型[容量] // 或者 数据类型 name[] = new 数据类型[容量]
// 静态创建
int[] name = {...}
```

#### 扩容注意

与 JS 不同，java 先申请空间，所以不能直接在超出空间大小的范围外直接修改数组

```java
int[] a = new int[3];
a[3] = 1; // wrong 越界了
```

因此，要想扩容就得先开辟空间，复制原数组，然后填入新数据。在 java 中，这是比较低效的，后续会学习 链表 --- TODO.

## 引用类型属性默认值

分配空间的数组根据类型不同有不同的默认值，比如 int 默认为 0,float 默认为 0.0，需要注意以下三种：

- boolean 默认为 `false`，
- char 默认为 `\u0000`，
- string 默认为 `null`

> 注意：局部变量必须设置初始值，且局部变量不能加修饰符

---

## 算数运算符注意点

Java 部分算数运算符和 JS 中的略有不同。

1. `/`，根据上面，按照最大精度类型来参与运算，如:
   ```java
   System.out.println(10 / 4);   // 2
   System.out.println(10.0 / 4); // 2.5
   ```
2. `%`，取余当被取余数为负数时，注意按照公式 `a % b = a - a / b * b` 来算
   ```java
   System.out.println(10 % -3);  // 1 <== 10-10/-3*-3
   ```

---

## 包

作用：区分相同名字的类和接口。
本质：就是创建不同的文件夹来保存类文件。

```java
// 在包内的java文件顶部需要声明，当然了用ide的话，都会自动做好
package 包名
```

包名不能用关键字或保留字，一般小写字母就行了，形如：`com.公司名.项目名.业务模块名`。

常用内置包：

- java.lang.\*，基本包，默认引入
- java.util.\*，系统提供的工具包
- java.net.\*，网络包
- java.awt.\*，界面开发，GUI

## 访问修饰符

- `public`：公开
- `protected`：对`子类`和`同一个包中的类`公开
- `无修饰符`：对`同一个包中的类`公开，`不在同一个包内，即使继承，也不能访问`
- `private`：只能类自身访问

![](https://cdn.staticaly.com/gh/yokiizx/picgo@master/img/202307042238681.png)

---
