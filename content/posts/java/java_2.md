---
title: 'Java_2'
date: 2023-06-15T20:12:28+08:00
tags: []
series: [java]
categories: [study notes]
---

## JAVA 基本数据类型

java 中有八大基础数据类型，和 js 的略有不同，Java 是强类型语言，每种类型在声明的时候就需要开辟出空间（需要注意每种类型的占空间大小）：

- byte：1 个字节，最小整数类型
- boolean：1 个字节，只能是 true 或 false，不能为 0、1 啥的
- char：2 个字节，单个字符，注意使用`单引号`  
  也可以是数字 -- 输出对应的 `ASCII` 码，本质上是数字，可以参加运算
- short：2 个字节
- int：4 个字节，（默认）
- long：8 个字节，_可以数字后加 'l' 或 'L'_
- float：4 个字节，单精度，[-3.403E38, 3,403E38]，_可以在数字后加 'f' 或 'F'_
- double：8 个字节，双精度，[-1.798E308, 1.798E308]，（默认）  
  浮点数 = 符号位 + 指数位 + 尾数位; 尾数部分可能丢失，造成精度损失。当计算出的浮点数和声明的浮点数比较时，应当是在一定范围内比较。

> 注：`1 byte = 8 bit`，也就是对应有 8 位数字的二进制数，所以 1 个字节可以存储的数据范围是 `[-128, 127]`，即 `[1000 0000, 0111 1111]`。PS：计算机世界负数按照补码来取的，`1000 0000(原码)` -> `1111 1111(反码)` ---> +1 `1000 0000(补码)` -> `-0`，`-0` 无意义，被利用起来规定为 `-128`。

### 基本类型转换

#### 自动类型转换

java 程序进行赋值或者运算时，精度小的会自动转换为精度大的。

两条线路：

- `char -> int -> long -> float -> double`
- `byte -> short -> int -> long -> float -> double`

```java
int a = 'a' // char -> int
double b = 97 // int -> double
```

> 注意：char, byte, short 之间不能自动转换，但是可以参与计算，计算时会首**先转换到 int 类型**

另，long 和 float 类型之后需要加 l 或 f 往往是因为在计算过程中，数字会被转换成容量最大的数据类型再进行计算。

#### 强制类型转换

数据的类型从大转小，就需要强制转换，一般不推荐，会产生精度损失或数据溢出的问题，除非很确定需要的是什么。

```java
int a = (int)8.88
```

在复合赋值运算符中，就会进行强制类型转换，如：

```java
byte a = 1
a += 1   // 实际上 a = (byte)(a + 1)
a++ // 也会强制转换
```

## JAVA 引用类型

- 类 class：Java 面向对象的基石，可以看成是自定义的数据类型
- 接口 interface: TODO
- 数组 []：与 js 数组不同，Java 数组存放的是`同一类型的数据`

> 与 JS 一致，基本类型也是值拷贝，引用类型是引用传递，拷贝的是物理地址。

### 类

关注一下通过类创建对象时，JVM 的内存状态：
![](https://cdn.staticaly.com/gh/yokiizx/picgo@master/img/202306262325036.png)

这篇文章也很不错：[String 在内存中如何存储（Java）](https://blog.csdn.net/iceyung/article/details/106202654)

### 接口

TODO

### JAVA 的数组

#### Java 创建数组方式有两种：

```java
// 动态创建
数据类型[] name = new 数据类型[容量] // 或者 数据类型 name[] = new 数据类型[容量]
// 静态创建
int[] name = {...}
```

#### 默认值

分配空间的数组根据类型不同有不同的默认值，比如 int 默认为 0,float 默认为 0.0，需要注意以下三种：

- boolean 默认为 `false`，
- char 默认为 `\u0000`，
- string 默认为 `null`

#### 扩容注意

与 JS 不同，java 先申请空间，所以不能直接在超出空间大小的范围外直接修改数组

```java
int[] a = new int[3];
a[3] = 1; // wrong 越界了
```

因此，要想扩容就得先开辟空间，复制原数组，然后填入新数据。在 java 中，这是比较低效的，后续会学习 链表 --- TODO.

---

## 算数运算符注意点

Java 部分算数运算符和 JS 中的略有不同。

1. `/`，根据上面，按照最大精度类型来参与运算，如:
   ```java
   System.out.println(10 / 4);   // 2
   System.out.println(10.0 / 4); // 2.5
   ```
2. `%`，取余当被取余数为负数时，注意按照公式 `a % b = a - a / b * b` 来算
   ```java
   System.out.println(10 % -3);  // 1 <== 10-10/-3*-3
   ```

---
