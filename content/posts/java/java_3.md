---
title: 'Java_3'
date: 2023-06-30T10:18:33+08:00
tags: []
series: [java]
categories: [study notes]
---

面向对象编程三大特性：`封装、继承和多态`。

## 封装

封装（英语：Encapsulation）是指一种将抽象性函式接口的实现细节部分包装、隐藏起来的方法。

### 一般方式

- 属性私有化 `private`
- 提供公开的 getter/setter 方法

## 继承

与 JS 一样，使用 `extends` 来实现继承。

### 注意细节

有以下注意点：

- 子类总是继承了所有的属性和方法，只是私有属性和方法不能在子类中访问，可以通过调用父类的公共方法间接访问
- 子类初始化时，总是默认会先调用父类的无参构造器，因为子类构造器中默认会有一个 `super()` 的动作。这种机制一直延伸到顶级类 `Object` 类
- 如果父类没有提供无参构造器，则必须在子类中调用 `super()` 指明是哪个构造器
- `super()` 和 `this()` 都必须在构造器第一行，所以不能共存，只能二选一
- 多级继承，`super` 关键字遵循 `就近原则`
- java 继承是`单继承机制`，子类只能继承一个类

### 继承本质

这里借用韩顺平老师的图：

![](https://cdn.staticaly.com/gh/yokiizx/picgo@master/img/202307042055445.png)

> 小结：在 new 一个对象的时候，JVM 先在方法区加载类（在这里会加载类的所有祖先类），然后再在堆中分配内存，最后在主栈中创建变量引用。

### 重写

子类中的某个方法和祖先类的某个方法完全一致（返回类型，名称，参数列表），这就叫做方法的重写。

注：1. 父类返回类型为子类返回类型的父类也可; 2. 子类不得缩小父类方法的访问权限

## 多态

方法或对象具有多种形态，是建立在封装和继承之上的。主要目的：`提高代码复用性`。

### 方法的多态

- 重载，体现在实例对象调用同名但返回类型或参数不同的方法
- 重写，体现在父子不同对象调用同名方法

### 对象的多态

重点：

- 一个对象的编译类型和运行类型可以不一致
- 编译类型在定义对象时，就确定了，不能改变
- 运行类型是可以变化的
- 编译类型看定义时 `=` 的左边，运行类型看 `=` 的右边

```java
// 基本演示
Animal animal = new Dog()
animal = new Cat() // animal 仍然是 Animal 类型，但是运行类型从 Dog 变成了 Cat
```

场景：

1. 比如方法，可以把入参的参数类型提升到父类，这样就可以避免一些不必要的重载的问题
