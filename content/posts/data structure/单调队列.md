---
title: 'å•è°ƒé˜Ÿåˆ—'
date: 2023-01-31T09:15:05+08:00
lastmod: 2024-02-27
series: [data structure]
categories: [algorithm]
---

### æ¦‚å¿µ

æ ˆæœ‰å•è°ƒæ ˆï¼Œé˜Ÿåˆ—è‡ªç„¶ä¹Ÿæœ‰å•è°ƒé˜Ÿåˆ—ï¼Œæ€§è´¨ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä¿æŒé˜Ÿåˆ—å†…çš„å…ƒç´ æœ‰åºï¼Œå•è°ƒé€’å¢æˆ–é€’å‡ã€‚

å…¶å®åŠ¨æ€æ±‚æå€¼é¦–å…ˆå¯ä»¥è”æƒ³åˆ°çš„åº”è¯¥æ˜¯ ã€Œä¼˜å…ˆé˜Ÿåˆ—ã€ï¼Œä½†æ˜¯ï¼Œä¼˜å…ˆé˜Ÿåˆ—æ— æ³•æ»¡è¶³**ã€Œå…ˆè¿›å…ˆå‡ºã€**çš„æ—¶é—´é¡ºåºï¼Œæ‰€ä»¥å•è°ƒé˜Ÿåˆ—åº”è¿è€Œç”Ÿã€‚

```js
// å…³é”®ç‚¹, ä¿æŒå•è°ƒæ€§ï¼Œå…¶æ‹å¹³æ•ˆæœä¸å•è°ƒæ ˆä¸€è‡´
while (q.length && num (<= | >=) q[q.length - 1]) {
    q.pop()
}
q.push(num)
```

## åœºæ™¯

ç»™ä½ ä¸€ä¸ªæ•°ç»„ windowï¼Œå·²çŸ¥å…¶æœ€å€¼ä¸º Aï¼Œå¦‚æœç»™ window ä¸­æ·»åŠ ä¸€ä¸ªæ•° Bï¼Œé‚£ä¹ˆæ¯”è¾ƒä¸€ä¸‹ A å’Œ B å°±å¯ä»¥ç«‹å³ç®—å‡ºæ–°çš„æœ€å€¼ï¼›ä½†å¦‚æœè¦ä» window æ•°ç»„ä¸­å‡å°‘ä¸€ä¸ªæ•°ï¼Œå°±ä¸èƒ½ç›´æ¥å¾—åˆ°æœ€å€¼äº†ï¼Œå› ä¸ºå¦‚æœå‡å°‘çš„è¿™ä¸ªæ•°æ°å¥½æ˜¯ Aï¼Œå°±éœ€è¦éå† window ä¸­çš„æ‰€æœ‰å…ƒç´ é‡æ–°å¯»æ‰¾æ–°çš„æœ€å€¼ã€‚

## ç»ƒä¸€ç»ƒ

### lc239. æ»‘åŠ¨çª—å£æœ€å¤§å€¼ hard

åŠ¨æ€è®¡ç®—æå€¼ï¼Œç›´æ¥å‘½ä¸­å•è°ƒé˜Ÿåˆ—çš„ä½¿ç”¨æ¡ä»¶ã€‚

```js
/**
 * @param {number[]} nums
 * @param {number} k
 * @return {number[]}
 */
var maxSlidingWindow = function (nums, k) {
    let res = []
    const monoQueue = []
    for (let i = 0; i < nums.length; ++i) {
        while (monoQueue.length && nums[i] >= nums[monoQueue[monoQueue.length - 1]]) {
            monoQueue.pop()
        }
        /** ä¸€ä¸ªé‡ç‚¹æ˜¯å­˜å‚¨ç´¢å¼•ï¼Œä¾¿äºåˆ¤æ–­çª—å£çš„å¤§å° */
        monoQueue.push(i)
        if (i - monoQueue[0] + 1 > k) monoQueue.shift()

        // r - l + 1 == k æ‰€ä»¥ l = r - k + 1 ä¿è¯æœ‰æ„ä¹‰
        if (i - k + 1 >= 0) res.push(nums[monoQueue[0]])
    }
    return res
}
```

### lc.862 å’Œè‡³å°‘ä¸º K çš„æœ€çŸ­å­æ•°ç»„ hard

çœ‹é¢˜ç›®å°±çŸ¥é“ï¼Œç¦»ä¸å¼€å‰ç¼€å’Œã€‚æƒ³åˆ°å•è°ƒé˜Ÿåˆ—ï¼Œæ˜¯æœ‰éš¾åº¦çš„ï¼Œèµ·ç æˆ‘ä¸€å¼€å§‹æƒ³ä¸åˆ° ğŸ˜­

<!-- TODO copyäº†ç­”æ¡ˆï¼Œåç»­å†ç»†çœ‹ -->

```js
var shortestSubarray = function (nums, k) {
    const n = nums.length
    const preSumArr = new Array(n + 1).fill(0)
    for (let i = 0; i < n; i++) {
        preSumArr[i + 1] = preSumArr[i] + nums[i]
    }
    let res = n + 1
    const queue = []
    for (let i = 0; i <= n; i++) {
        const curSum = preSumArr[i]
        while (queue.length != 0 && curSum - preSumArr[queue[0]] >= k) {
            res = Math.min(res, i - queue.shift())
        }
        while (queue.length != 0 && preSumArr[queue[queue.length - 1]] >= curSum) {
            queue.pop()
        }
        queue.push(i)
    }
    return res < n + 1 ? res : -1
}
```

### lc.918 ç¯å½¢å­æ•°ç»„çš„æœ€å¤§å’Œï¼ˆå•è°ƒé˜Ÿåˆ—ï¼‰

è¿™é“é¢˜åœ¨å‰ç¼€å’Œçš„æ—¶å€™é‡åˆ°è¿‡ï¼Œå†æ¥å¤ä¹ ä¸€æ¬¡å§ ğŸ˜

```js
/**
 * @param {number[]} nums
 * @return {number}
 */
var maxSubarraySumCircular = function (nums) {
    // è¿™é“é¢˜æ˜¯æ¯”è¾ƒç»¼åˆçš„ä¸€é“é¢˜ï¼Œç”¨åˆ°äº†å‰ç¼€å’Œï¼Œå¾ªç¯æ•°ç»„æŠ€å·§ï¼Œæ»‘åŠ¨çª—å£å’Œå•è°ƒé˜Ÿåˆ—æŠ€å·§
    let max = -Infinity
    const monoQueue = [[0, nums[0]]] // å•è°ƒé˜Ÿåˆ—å­˜å‚¨ ã€index,preSumã€‘çš„æ•°æ®ç»“æ„
    const n = nums.length
    let preSum = nums[0]
    for (let i = 1; i < 2 * n; ++i) {
        preSum += nums[i % n]
        max = Math.max(max, preSum - monoQueue[0][1]) // å­æ•°ç»„å’Œè¶Šå¤§ï¼Œå‡å»çš„å°±åº”è¯¥è¶Šå°
        while (monoQueue.length && preSum <= monoQueue[monoQueue.length - 1][1]) {
            monoQueue.pop()
        }
        monoQueue.push([i, preSum])
        // æ ¹æ®ç´¢å¼•æ§åˆ¶ çª—å£å¤§å°
        while (monoQueue.length && i - monoQueue[0][0] + 1 > n) {
            monoQueue.shift()
        }
    }
    return max
}
```

<!-- lc.1425 å¸¦é™åˆ¶çš„å­åºåˆ—å’Œ hard; lc.1696 è·³è·ƒæ¸¸æˆ VI  æœ‰æ—¶é—´å†åšåšå§-->
