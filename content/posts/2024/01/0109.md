---
title: '0109'
date: 2024-01-09T20:10:19+08:00
lastmod:
tags: []
series: []
categories: []
---

## å“ˆå¸Œè¡¨

åœ¨ javascript ä¸­çš„ Set å’Œ Map å’±å°±ä¸è¯´å•¥äº†ï¼Œéæ­£è§„å†› ğŸ˜„ã€‚æ¥çœ‹çœ‹ java çš„ï¼š

1. æ— åºè¡¨
   - HashSet: add remove containsï¼Œå¯¹å‘€ c++ ä¸­çš„ unordered_set
   - HashMap: put remove containsKeyï¼Œå¯¹åº” c++ ä¸­çš„ unordered_map
2. æœ‰åºè¡¨
   - TreeSetï¼šå®ƒæ˜¯æŒ‰å‡åºå¯¹å…ƒç´ è¿›è¡Œæ’åºï¼Œå¯¹åº” c++ ä¸­çš„ ordered_set
   - TreeMapï¼šåŸºäºçº¢é»‘æ ‘çš„ NavigableMap å®ç°ï¼Œå®ƒæ ¹æ®å…¶é”®çš„è‡ªç„¶é¡ºåºæ’åºï¼Œå¯¹åº” c++ ä¸­çš„ ordered_map

è®°å¾—ä¹‹å‰å­¦ java çš„æ—¶å€™ï¼Œ HashSet åº•å±‚å°±æ˜¯ HashMapï¼Œåªä¸è¿‡æ²¡æœ‰ value åªæœ‰ key ç½¢äº†ã€‚

1. æ”¾å…¥æ— /æœ‰åºè¡¨çš„ä¸œè¥¿ï¼Œå¦‚æœæ˜¯åŸºç¡€ç±»å‹ï¼Œå†…éƒ¨æŒ‰å€¼ä¼ é€’ï¼Œå†…å­˜å ç”¨å°±æ˜¯è¿™ä¸ªä¸œè¥¿çš„å¤§å°
2. æ”¾å…¥æ— åºè¡¨çš„ä¸œè¥¿ï¼Œå¦‚æœä¸æ˜¯åŸºç¡€ç±»å‹ï¼Œå†…éƒ¨æŒ‰å¼•ç”¨ä¼ é€’ï¼Œå†…å­˜å ç”¨çš„å°±æ˜¯è¿™ä¸ªä¸œè¥¿çš„å†…å­˜åœ°å€çš„å¤§å°ï¼Œjava ä¸­æ˜¯ 8 ä¸ªå­—èŠ‚
3. æ”¾å…¥æœ‰åºè¡¨çš„ä¸œè¥¿ï¼Œå¦‚æœä¸æ˜¯åŸºç¡€ç±»å‹ï¼Œ**å¿…é¡»æä¾›æ¯”è¾ƒå™¨**ï¼Œå†…éƒ¨æŒ‰å¼•ç”¨ä¼ é€’...ã€‚

> é‡ç‚¹ï¼šæ— åºè¡¨ çš„å¢åˆ æ”¹æŸ¥çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ **å¸¸æ•°** çº§åˆ«ï¼ˆæ¯”è¾ƒå¤§çš„å¸¸æ•° å“ˆå“ˆï¼‰ï¼Œæœ‰åºè¡¨çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(logn) çº§åˆ«

---

## é“¾è¡¨

```java
class Node<V> {
  V value;
  Node next;
}
class Node<V> {
  V value;
  Node next;
  Node last;
}
```

> å¯¹äºé“¾è¡¨ç®—æ³•ï¼Œåœ¨é¢è¯•ä¸­ï¼Œä¸€å®šå°½é‡ç”¨åˆ°ç©ºé—´å¤æ‚åº¦æœ€å°çš„æ–¹æ³•ï¼ˆä¸ç„¶å‡­å•¥ç”¨å’±æ˜¯å§ ğŸ¶ï¼‰ã€‚

### é“¾è¡¨æ¢å¤´

å½“é“¾è¡¨çš„æ“ä½œä¼šäº§ç”Ÿæ¢å¤´çš„æƒ…å†µæ—¶ï¼Œå‡½æ•°çš„é€’å½’è°ƒç”¨å½¢å¼åº”è¯¥æ˜¯ `head = func(head.next)`ï¼Œæ‰€ä»¥å‡½æ•°åœ¨è®¾è®¡çš„æ—¶å€™å°±åº”è¯¥æœ‰ä¸€ä¸ª Node ç±»å‹çš„è¿”å›å€¼ï¼Œæ¯”å¦‚åè½¬é“¾è¡¨ï¼Œè§ä¸‹æ–¹ã€‚

### é“¾è¡¨å“¨å…µå®ˆå«

é€šè¿‡åœ¨é“¾è¡¨å¤´éƒ¨æ·»åŠ ä¸€ä¸ªå“¨å…µèŠ‚ç‚¹ï¼ˆdummy nodeï¼‰ï¼Œè¿™æ ·å°±æ— éœ€ç‰¹æ®Šå¤„ç†**å¤´èŠ‚ç‚¹ä¸ºç©º**æˆ–è€…**å¤´èŠ‚ç‚¹å˜åŒ–**çš„è¾¹ç•Œæ¡ä»¶ã€‚

æ¯”å¦‚é“¾è¡¨å»å¤´åŠ å°¾æ“ä½œï¼š

```java
/* ---------- å¤´éƒ¨åˆ  ---------- */
public void delHead() {
  ListNode p = head;
  /**
   *  æ²¡æœ‰å®ˆå«æ—¶ï¼Œåˆ é™¤å¤´èŠ‚ç‚¹çš„æ“ä½œæ˜¯ p = p.next
   *  if (p != null) {
   *     p = p.next;
   *  }
   *  è€Œåˆ é™¤å…¶ä»–çš„èŠ‚ç‚¹çš„æ“ä½œæ˜¯ p.next = p.next.nextï¼Œ
   *  æ‰€ä»¥å°±éœ€è¦åˆ†åˆ«è®¨è®ºåˆ é™¤headå’Œå…¶å®ƒèŠ‚ç‚¹çš„æƒ…å†µ
   *
   *  æ°æ°å› ä¸ºæœ‰ dummy å®ˆå«èŠ‚ç‚¹çš„å­˜åœ¨ï¼Œæ— è®ºå¤´èŠ‚ç‚¹è¿˜æ˜¯å…¶ä»–èŠ‚ç‚¹éƒ½ç»Ÿä¸€ä½¿ç”¨ p.next = p.next.next
   *  if (p.next != null) {
   *    p.next = p.next.next;
   *  }
   *  å°±ç®€åŒ–äº†è¾¹ç•Œæ¡ä»¶çš„åˆ¤æ–­
   */
}
```

å†æ¯”å¦‚ï¼Œéœ€è¦åˆ›å»ºä¸€æ¡æ–°é“¾è¡¨ï¼Œè§ä¸‹æ–¹åˆ†ç¦»é“¾è¡¨çš„æ“ä½œã€‚

<!-- public void deleteAtIndex(int index) {
    ListNode p = head;
    for (int i = 0; i < index; i++) {
        p = p.next;
        if (p == null) {
            return; // è¶…å‡ºé“¾è¡¨é•¿åº¦
        }
    }
    if (p.next != null) {
        p.next = p.next.next;
    }
}
public void deleteAtIndex(int index) {
    if (index < 0 || head == null) {
        return;
    }
    if (index == 0) {
        head = head.next;
        return;
    }

    ListNode p = head;
    for (int i = 0; i < index - 1; i++) {
        p = p.next;
        if (p == null) {
            return; // è¶…å‡ºé“¾è¡¨é•¿åº¦
        }
    }
    if (p.next != null) {
        p.next = p.next.next;
    }
} -->

```java
/* ---------- å°¾éƒ¨å¢ ---------- */
public void addTrail(ListNode node) {
  /**
   * å½“ head ä¸º null æ—¶ï¼Œåœ¨å°¾éƒ¨æ·»åŠ nodeå°±éœ€è¦å¤„ç†headä¸ºnullçš„è¾¹ç•Œæ¡ä»¶
   *  if (head == null) {
   *        head = node;
   *        return;
   *    }
   */
  // å½“ head = dummy (new ListNode(-1)) æ—¶ï¼Œå°±ä¸éœ€è¦ä¸Šé¢çš„è¾¹ç•Œæ¡ä»¶å¤„ç†äº†
  ListNode p = head;
  while (p.next != null) {
      p = p.next;
  }
  p.next = node;
}
```

### é“¾è¡¨ä¸­å¸¸ç”¨çš„æŠ€å·§-å¿«æ…¢æŒ‡é’ˆ

#### æ‰¾åˆ°é“¾è¡¨çš„ä¸­ç‚¹ã€ä¸­ç‚¹å‰ä¸€ä¸ªã€ä¸­ç‚¹åä¸€ä¸ª

è¿™ä¸ªæ˜¯ç¡¬ç¼–ç èƒ½åŠ›ï¼Œéœ€è¦å¤§é‡ç»ƒä¹ æ‰“å¥½åŸºæœ¬åŠŸã€‚

```java
/**
 * å¥‡æ•°çš„ä¸­ç‚¹ & å¶æ•°çš„ä¸­ç‚¹é å‰ä¸€ä½
 */
Node s = head;
Node f = head;
while (f.next != null && f.next.next != null) {
    s = s.next;
    f = f.next.next;
}

/**
 * å¥‡æ•°çš„ä¸­ç‚¹ & å¶æ•°çš„ä¸­ç‚¹é åä¸€ä½
 */
while (f != null && f.next != null) {
    s = s.next;
    f = f.next.next;
}
```

å¦‚æœè¦è¿›ä¸€æ­¥ç»§ç»­åç§»ï¼Œä¿®æ”¹ f æˆ– s çš„åˆå§‹èŠ‚ç‚¹å³å¯ã€‚

æ³¨æ„ï¼šå› ä¸º f ä¸€æ¬¡èµ°ä¸¤æ­¥ï¼Œæ‰€ä»¥ï¼š

- æƒ³è¦è·å–ä¸­ç‚¹å¾€å‰çš„èŠ‚ç‚¹ï¼Œä¿®æ”¹ f åˆå§‹èŠ‚ç‚¹æ—¶ f=head.next.nextï¼Œä¸¤ä¸ª next æ‰ä¼šè®©ç»“æœå¾€å‰åç§»ä¸€æ­¥
- æƒ³è¦è·å–ä¸­ç‚¹å¾€åçš„èŠ‚ç‚¹ï¼Œä¿®æ”¹ s çš„åˆå§‹èŠ‚ç‚¹ s=head.nextï¼Œä¸€ä¸ª next å°±å¯ä»¥è®©ç»“æœå¾€ååç§»ä¸€æ­¥

### ç»ƒä¹ 

- åè½¬é“¾è¡¨ï¼ˆrecursion&iteration ä¸¤ç§æ–¹å¼ï¼‰(lc.206)

  ```java
  // è¿­ä»£æ³•ï¼Œé‚£å°±æ˜¯åŒæŒ‡é’ˆäº†ï¼Œå…ˆå­˜å‚¨åç»§èŠ‚ç‚¹ï¼Œå‰©ä¸‹çš„éƒ½å¥½åŠ
  public ListNode reverseList(ListNode head) {
      ListNode p = head, pre = null;
      while(p != null) {
          ListNode next = p.next; // å‚¨å­˜åç»§èŠ‚ç‚¹
          p.next = pre;
          pre = p;
          p = next;
      }
      return  pre;
  }
  // é€’å½’æ³•
  public ListNode reverseList(ListNode head) {
    if (head == null || head.next == null) return head;
    ListNode newHead = reverseList(head.next); // newHead æ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹
    // ååºéå†ï¼Œå‡è®¾é€’å½’åˆ°æœ€åäº†ï¼Œæ­¤æ—¶çš„ head æ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹
    head.next.next = head; // æŠŠä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„nextæŒ‡å‘è‡ªèº«
    head.next = null; // æŠŠè‡ªèº«çš„nextæŒ‡å‘null
    return newHead; // è¿”å›å°¾éƒ¨èŠ‚ç‚¹çš„å¼•ç”¨æŒ‡é’ˆå³å¯
  }
  ```

- åˆ¤æ–­ä¸€ä¸ªé“¾è¡¨æ˜¯å¦æ˜¯å›æ–‡ç»“æ„ï¼ˆlc.234ï¼‰

  ```java
  /**
  * è¿™é“é¢˜è§£æ³•å¾ˆå¤šï¼Œå¦‚æœå€ŸåŠ©ä¸€ä¸ªé¢å¤–çš„æ ˆå°±å¾ˆç®€å•ï¼Œ
    * ä½†æ˜¯é¢è¯•ä¸­é“¾è¡¨ä¸€å®šè¦æ‰¾åˆ°é¢å¤–ç©ºé—´å¤æ‚åº¦æœ€ä½³çš„æ–¹æ³•ã€‚
    * è¦æ±‚æ—¶é—´å¤æ‚åº¦ O(n), ç©ºé—´å¤æ‚åº¦ O(1)
    */
  class Solution {
    public boolean isPalindrome(ListNode head) {
      // è¦æƒ³ç©ºé—´å¤æ‚åº¦ä¸º O(1)ï¼ŒæŠŠååŠéƒ¨åˆ†é“¾è¡¨åè½¬è¿‡æ¥ï¼Œç„¶åæ¯”è¾ƒå³å¯
      ListNode s = head, f = head;
      while(f != null && f.next != null) {
          s = s.next;
          f = f.next.next;
      }
      // æ­¤æ—¶ s åœ¨ä¸­ç‚¹æˆ–è€…ä¸­ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¯¹ååŠéƒ¨åˆ†åè½¬é“¾è¡¨ï¼ˆè¿™é‡Œæ˜¯å¦ä¸€ç§åŒæŒ‡é’ˆåè½¬æ–¹å¼ï¼‰
      ListNode curr = s;
      while(s.next != null) {
          // ç¼“å­˜ä¸‹ä¸‹ä¸ªèŠ‚ç‚¹ï¼Œæœ€ååè½¬å®Œäº†åï¼Œheadæ°å¥½æŒ‡å‘åŸæ¥çš„å°¾ null ä¸Š
          ListNode next = s.next.next;
          s.next.next = curr; // ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘å½“å‰èŠ‚ç‚¹
          curr = s.next; // å½“å‰èŠ‚ç‚¹æŒ‡é’ˆç§»åŠ¨åˆ°ä¸‹ä¸ªèŠ‚ç‚¹
          s.next = next; // sèŠ‚ç‚¹æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸‹ä¸ªèŠ‚ç‚¹
      }

      boolean isPalindrome = true;
      s = head;
      while(curr != null && s != null) {
          if(curr.val != s.val) {
              return  false;
          }
          curr = curr.next;
          s = s.next;
      }
      /**
       * æœ€ååº”è¯¥æŠŠåè½¬çš„é“¾è¡¨å†åè½¬å›å»[æ—ºæŸ´]
       */
      return true;
    }
  }
  ```

- å°†é“¾è¡¨åˆ’åˆ†æˆå·¦è¾¹å°ã€ä¸­é—´ç›¸ç­‰ã€å³è¾¹å¤§çš„å½¢å¼
  ```java
  /**
   * è¿™é¢˜å¦‚æœå€ŸåŠ©æ•°ç»„ï¼Œé‚£ä¸å°±æ˜¯å¿«æ’çš„ partition å—ï¼Ÿ
   *
   * è¦æƒ³æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼Œé‚£ä¹ˆå°±å¾—å€ŸåŠ© 6 ä¸ªå˜é‡ <head <tail =head =tail >head >tail
   * éœ€è¦æ³¨æ„çš„ç‚¹å°±æ˜¯ï¼Œè¦åˆ¤æ–­å˜é‡æ˜¯å¦ä¸º null
   */
  ```
- å¤åˆ¶å«æœ‰éšæœºæŒ‡é’ˆçš„é“¾è¡¨ (lc.138)

  ```java
  /**
   * è¿™é“é¢˜è¦æ˜¯ç©ºé—´å¤æ‚åº¦ä¸éœ€è¦ O(1)ï¼Œé‚£ä¹ˆç”¨å“ˆå¸Œè¡¨å°±æŒºå¥½åšçš„
   *
   * O(1) çš„ç©ºé—´å¤æ‚åº¦ï¼Œå°±éœ€è¦ä¸€å®šçš„æŠ€å·§äº†ï¼Œå°±æ˜¯ æ‹¼æ¥+æ‹†åˆ†ã€‚
   */
   // å“ˆå¸Œè¡¨
  class Solution {
    public Node copyRandomList(Node head) {
        Map<Node, Node> map = new HashMap<>();
        Node p = head;
        while (p != null) {
            map.put(p, new Node(p.val));
            p = p.next;
        }
        p = head;
        while(p != null) {
            map.get(p).next = map.get(p.next);
            map.get(p).random = map.get(p.random);
            p = p.next;
        }
        return map.get(head);
    }
  }
  ```

  ```java
  public Node copyRandomList(Node head) {
    // æ°åˆ°å¥½å¤„çš„æ‹¼æ¥ï¼Œå¤åˆ¶èŠ‚ç‚¹ç›´æ¥æ‹¼åˆ°åŸèŠ‚ç‚¹åï¼Œè¿™æ ·ä¼šå‘ç°ï¼š
    // ** æ–°èŠ‚ç‚¹çš„randomæŒ‡å‘çš„å°±æ˜¯åŸèŠ‚ç‚¹randomæŒ‡å‘èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ **
    // 1.å¤åˆ¶èŠ‚ç‚¹
    Node p = head;
    while (p != null) {
        Node newNode = new Node(p.val);
        newNode.next = p.next;
        p.next = newNode;
        p = newNode.next;
    }
    // 2.è®¾ç½®random
    p = head;
    while (p != null) {
        if(p.random != null) {
            p.next.random = p.random.next;
        }
        p = p.next.next;
    }
    // 3.åˆ†ç¦»é“¾è¡¨
    Node dummy = new Node(-1);
    p = head;
    Node curr = dummy;
    while (p != null) {
        curr.next = p.next;
        curr = curr.next;
        p.next = curr.next;
        p = p.next;
    }
    return dummy.next;
  }
  ```

- ä¸¤ä¸ªå•é“¾è¡¨ç›¸äº¤ç³»åˆ—é—®é¢˜
  - 1
  - 2
  - 3
