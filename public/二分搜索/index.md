# äºŒåˆ†æœç´¢


## äºŒåˆ†æ³•é€‚ç”¨æ¡ä»¶

ä¸€å¼€å§‹ï¼Œæˆ‘ç®€å•åœ°è®¤ä¸ºæ˜¯æ•°æ®éœ€è¦å…·æœ‰**å•è°ƒæ€§**ï¼Œæ‰èƒ½åº”ç”¨äºŒåˆ†ï¼›åæ¥åˆ·äº†ä¸€éƒ¨åˆ†é¢˜ä¹‹åï¼Œæ‰æ™“å¾—ï¼Œ`åº”ç”¨äºŒåˆ†çš„æœ¬è´¨æ˜¯æ•°æ®å…·æœ‰**äºŒæ®µæ€§**`ï¼Œå³ï¼šä¸€æ®µæ»¡è¶³æŸä¸ªæ€§è´¨ï¼Œå¦å¤–ä¸€æ®µä¸æ»¡è¶³æŸä¸ªæ€§è´¨ï¼Œå°±å¯ä»¥ç”¨ã€ŒäºŒåˆ†ã€ã€‚

## é‡ç‚¹ç†è§£ï¼ï¼ï¼

### å¾ªç¯ä¸å˜å¼

-   `while low <= high`

    1. ç»ˆæ­¢æ¡ä»¶ï¼Œä¸€å®šæ˜¯ `low + 1 == high`ï¼Œä¹Ÿå³ low > right
    2. æ„å‘³ç€ï¼Œæ•´ä¸ªåŒºé—´ `[low..high]` é‡Œçš„æ¯ä¸ªå…ƒç´ éƒ½è¢«éå†è¿‡äº†

-   `while low < high`

    1. ç»ˆæ­¢æ¡ä»¶ï¼Œä¸€å®šæ˜¯ `low == high`
    2. æ„å‘³ç€ï¼Œæ•´ä¸ªåŒºé—´ `[low..high]` é‡Œå½“ low == high æ—¶çš„å…ƒç´ å¯èƒ½ä¼šæ²¡æœ‰è¢«éå†åˆ°ï¼Œéœ€è¦æ‰“ä¸ªè¡¥ä¸
    3. è¡¥å……ï¼šå¦‚ lc.153ï¼Œé‡‡ç”¨é€¼è¿‘ç­–ç•¥å¯»æ‰¾ç­”æ¡ˆæ—¶ï¼Œä¸¤æŒ‡é’ˆæœ€åæŒ‡å‘ç›¸åŒä½ç½®ï¼Œå¦‚è¿‡è¿™ä¸ªä½ç½®çš„å…ƒç´ ä¸ç”¨æ‹¿å‡ºæ¥åšä»€ä¹ˆæ“ä½œï¼Œåªæ˜¯æ‰¾åˆ°å®ƒå°±è¡Œï¼Œé‚£ä¹ˆå°±ç”¨ < ä¹Ÿæ˜¯åˆé€‚çš„ã€‚

### å¯è¡Œè§£åŒºé—´

å¯¹äºäºŒåˆ†æœç´¢è¿‡ç¨‹ä¸­çš„æ¯ä¸€æ¬¡å¾ªç¯ï¼Œå®ƒçš„å¯è¡Œè§£åŒºé—´éƒ½åº”å½“ä¸€è‡´ï¼Œç»“åˆå¯¹äºå¾ªç¯ä¸å˜å¼çš„ç†è§£ï¼š

-   `[low...high]`ï¼Œå·¦å³éƒ½é—­åŒºé—´ï¼Œä¸€èˆ¬æ ¹æ® mid å°±èƒ½åˆ¤æ–­ä¸‹ä¸€ä¸ªæœç´¢åŒºé—´æ˜¯ `low = mid + 1` è¿˜æ˜¯ `high = mid - 1`
-   `[low...high)`ï¼Œå·¦é—­å³å¼€åŒºé—´ï¼Œç»´æŒå¯è¡Œè§£åŒºé—´ï¼Œä¸‹ä¸€ä¸ªæœç´¢åŒºé—´å·¦è¾¹æ˜¯ `low = mid + 1`ï¼Œå³è¾¹æ˜¯ `high = mid`

å› ä¸ºæ•°ç»„çš„ç‰¹æ€§ï¼Œå¸¸ç”¨çš„å°±æ˜¯è¿™ä¸¤ç§åŒºé—´ã€‚å½“ç„¶ä¹Ÿæœ‰å·¦å³éƒ½å¼€çš„åŒºé—´ `(low...high)`ï¼Œå¯¹åº”çš„å¾ªç¯ä¸å˜å¼ä¸º `while low + 1 < high`ï¼Œä¸è¿‡æ¯”è¾ƒå°‘è§ã€‚

> å¦å¤–è¯·åŠ¡å¿…ç†è§£å¯è¡Œè§£åŒºé—´åˆ°åº•æ˜¯ä¸ªå•¥ï¼ä¸æ˜¯è¯´å®šä¹‰äº†æŒ‡é’ˆä¸º `low = 0, high = len - 1`ï¼Œå°±ä»£è¡¨ç€å¯è¡Œè§£åŒºé—´ä¸º `[low...high]`ï¼Œè€Œæ˜¯éœ€è¦çœ‹å®é™…é¢˜æ„ã€‚æ¯”å¦‚ï¼Œä½ èƒ½ç¡®å®š low = 0 æŒ‡é’ˆå’Œ high = len - 1 æŒ‡é’ˆçš„è§£ä¸€å®šä¸åœ¨æˆ‘éœ€è¦çš„ç»“æœä¹‹ä¸­ï¼Œé‚£ä¹ˆå¯¹åº”çš„å¯è¡Œè§£åŒºé—´å°±æ˜¯ `(low...high)`ï¼Œç›¸åº”çš„å°±å¯ä»¥ä½¿ç”¨ `while low + 1 < high` çš„å¾ªç¯ä¸å˜å¼

> å¯¹äºå¯»æ‰¾å·¦å³è¾¹ç•Œçš„é—®é¢˜ï¼Œä¹Ÿæ˜¯æ ¹æ®å¯è¡Œè§£åŒºé—´ï¼Œå»å†³å®š low æˆ– high çš„æ¯ä¸€è½® updateã€‚æœç´¢å·¦ä¾§è¾¹ç•Œï¼šmid == x æ—¶ r = mid; æœç´¢å³ä¾§è¾¹ç•Œï¼š mid == x æ—¶ï¼Œl = mid + 1ï¼Œéœ€è¦æ³¨æ„ï¼Œæœç´¢å³è¾¹ç•Œç»“æŸæ—¶ l = mid + 1ï¼Œæ‰€ä»¥æœç´¢æ•°æ®çš„çœŸå®ä½ç½®æ˜¯ l - 1 ã€‚

## ç»ƒä¹ 

### lc.33 æœç´¢æ—‹è½¬æ’åºæ•°ç»„

```js
/**
 * @param {number[]} nums
 * @param {number} target
 * @return {number}
 */
var search = function (nums, target) {
    let l = 0,
        r = nums.length - 1
    while (l <= r) {
        const mid = l + ((r - l) >> 1)
        if (nums[mid] === target) {
            return mid
        } else if (nums[mid] < nums[l]) {
            // å³åŠè¾¹æœ‰åºçš„æƒ…å†µ
            if (nums[mid] < target && target <= nums[r]) {
                l = mid + 1
            } else {
                r = mid - 1
            }
        } else {
            // å·¦åŠè¾¹æœ‰åºçš„æƒ…å†µ target åœ¨æœ‰åºåŒºé—´å†…
            if (nums[l] <= target && target < nums[mid]) {
                r = mid - 1
            } else {
                l = mid + 1
            }
        }
    }
    return -1
}

/**
 * æ¥çœ‹ä¸€ä¸‹ï¼Œå¦‚æœç”¨å¼€é—­å³å¼€åŒºé—´çš„æ–¹å¼ï¼Œæ€ä¹ˆæ”¹å†™ä»£ç 
 */
var search = function (nums, target) {
    let l = 0,
        r = nums.length
    while (l < r) {
        const mid = l + ((r - l) >> 1)
        if (nums[mid] === target) {
            return mid
        } else if (nums[mid] > nums[l]) {
            // å·¦åŠè¾¹æœ‰åºçš„æƒ…å†µ target åœ¨æœ‰åºåŒºé—´å†…
            if (nums[l] <= target && target < nums[mid]) {
                r = mid
            } else {
                l = mid + 1
            }
        } else {
            // å³åŠè¾¹æœ‰åºçš„æƒ…å†µ
            /**
             * è¿™é‡Œéœ€è¦æ ¼å¤–æ³¨æ„!!!ï¼Œå› ä¸ºå³è¾¹ç•Œæ˜¯å¼€åŒºé—´ï¼Œæ‰€ä»¥æ¯”è¾ƒçš„æ˜¯ nums[r - 1]
             */
            if (nums[mid] < target && target <= nums[r - 1]) {
                l = mid + 1
            } else {
                r = mid
            }
        }
    }
    return -1
}
```

### lc.34 åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®

æ¯”ä¸Šä¸€é¢˜è¿˜ç®€å•~

```js
/**
 * @param {number[]} nums
 * @param {number} target
 * @return {number[]}
 */
var searchRange = function (nums, target) {
    // å°±æ˜¯å¯»æ‰¾å·¦å³è¾¹ç•Œ
    const res = []
    let l = 0,
        r = nums.length
    while (l < r) {
        const mid = l + ((r - l) >> 1)
        if (nums[mid] < target) {
            l = mid + 1
        } else {
            r = mid
        }
    }
    if (nums[l] !== target) return [-1, -1] // æ³¨æ„ç‚¹ï¼Œè®°å¾—åˆ¤æ–­æ˜¯å¦å­˜åœ¨target
    res[0] = l
    l = 0
    r = nums.length
    while (l < r) {
        const mid = l + ((r - l) >> 1)
        if (nums[mid] > target) {
            r = mid
        } else {
            l = mid + 1
        }
    }
    res[1] = r - 1 // å› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯å·¦é—­å³å¼€åŒºé—´ï¼Œæœ€ç»ˆå–å³è¾¹ç•Œ - 1 å³å¯
    return res
}
/**
 * å¯¹äºæ±‚è¾¹ç•Œçš„äºŒåˆ†ï¼Œå¦‚æœç”¨å·¦å³éƒ½é—­çš„å½¢å¼ï¼Œéœ€è¦åœ¨ while ååˆ¤æ–­ä¸€ä¸‹ lã€r æ˜¯å¦åœ¨åŒºé—´å†…
 * å› ä¸º l <= r çš„ç»“æŸæ¡ä»¶æ˜¯ l + 1 = rï¼Œæœ‰å¯èƒ½äº§ç”Ÿè¶Šç•Œæƒ…å†µï¼Œ
 * è¿™é“é¢˜æ°å¥½æ˜¯é¢˜ç›®è¦æ±‚äº†ï¼Œæ‰€ä»¥åšäº†ä¸ªåˆ¤æ–­
 */
```

> åœ¨åˆ¤æ–­ nums[mid] å’Œ target çš„å¤§å°æ¥è¿›è¡Œå†³ç­–çš„æ—¶å€™ï¼Œæˆ‘çš„ä¹ æƒ¯æ˜¯çœ‹ target åœ¨ mid çš„å·¦è¾¹è¿˜æ˜¯å³è¾¹ï¼Œè¿™æ ·å°±æ›´ç›´è§‚ä¸€äº›ã€‚æ¯”å¦‚ï¼š nums[mid] > targetï¼Œç›´è§‚ç†è§£åº”è¯¥æ˜¯ mid åœ¨ target çš„å³è¾¹ï¼Œè¿™æ—¶å€™å¯èƒ½ä¸€ä¸‹å­æœ‰ç‚¹æ‡µï¼Œæ˜¯å»æ”¶ç¼©å·¦è¾¹è¿˜æ˜¯æ”¶ç¼©å³è¾¹ï¼ˆå¯èƒ½æˆ‘æ¯”è¾ƒèœï¼‰ğŸ˜‚ å¦‚æœè½¬æ¢ä¸º target åœ¨ mid çš„å·¦è¾¹ï¼Œè„‘è¡¥ä¸€ä¸‹å°±èƒ½æƒ³å¾—åˆ°è¦å»å·¦è¾¹å¯»æ‰¾ï¼Œæ‰€ä»¥è¦æ”¶ç¼©å³è¾¹ç•Œã€‚

### lc.35 æœç´¢æ’å…¥ä½ç½® easy

```js
/**
 * @param {number[]} nums
 * @param {number} target
 * @return {number}
 */
var searchInsert = function (nums, target) {
    let l = 0,
        r = nums.length
    while (l < r) {
        const mid = l + ((r - l) >> 1)
        if (nums[mid] === target) {
            return mid
        } else if (nums[mid] > target) {
            r = mid
        } else {
            l = mid + 1
        }
    }
    return l
}
```

æ¯”è¾ƒæ™®é€šçš„ä¸€é¢˜ï¼Œæˆ‘çœ‹äº†å®˜è§£å’Œè¯„è®ºåï¼Œæœ‰äººé—®æ‰¾åˆ° target åä¸ºä»€ä¹ˆä¸ç›´æ¥è¿”å›ï¼ˆå®˜è§£æ˜¯æ²¡æœ‰è¿”å›çš„ï¼‰ï¼Œä»”ç»†çœ‹äº†ä¸‹é¢˜ç›®ï¼Œå› ä¸ºé¢˜ç›®ä¸­è§„å®šäº† nums ä¸­ä¸ä¼šæœ‰é‡å¤çš„å…ƒç´ ï¼Œæ‰€ä»¥ï¼ŒæŒ‰é“ç†è¯´æ˜¯å¯ä»¥ç›´æ¥è¿”å›çš„ï¼Œå®˜è§£æ˜¯è€ƒè™‘åˆ°äº†æœ‰é‡å¤å…ƒç´ çš„æƒ…å†µï¼Œå˜æˆäº†å¯»æ‰¾å·¦è¾¹ç•Œå»äº†ã€‚

---

<!-- ### lc.704 äºŒåˆ†æŸ¥æ‰¾ easy å¤ªç®€å•å°±ä¸åšäº†ï¼Œåˆå­¦è€…å¯ä»¥çœ‹çœ‹ -->

### lc.74 æœç´¢äºŒç»´çŸ©é˜µ

```js
/**
 * @param {number[][]} matrix
 * @param {number} target
 * @return {boolean}
 */
var searchMatrix = function (matrix, target) {
    let l = 0,
        r = matrix.length
    while (l < r) {
        const mid = l + ((r - l) >> 1)
        if (matrix[mid][0] === target) {
            return true
        } else if (matrix[mid][0] > target) {
            r = mid
        } else {
            l = mid + 1
        }
    }
    // å› ä¸ºå¯»æ‰¾çš„æ˜¯ ç¬¬ä¸€ä¸ª >= target çš„ï¼Œå³å¯»æ‰¾ç¬¬ä¸€åˆ—çš„å³è¾¹ç•Œ
    if (r - 1 < 0) return false

    const row = matrix[l - 1]
    let i = 0,
        j = row.length
    while (i < j) {
        const mid = i + ((j - i) >> 1)
        if (row[mid] === target) {
            return true
        } else if (row[mid] > target) {
            j = mid
        } else {
            i = mid + 1
        }
    }
    return false
}
```

### lc.81 æœç´¢æ—‹è½¬æ’åºæ•°ç»„ II

å¯¹æ¯” lc.33 é¢˜åªæ˜¯å¤šäº†é‡å¤çš„å…ƒç´ ï¼Œé—®é¢˜æ˜¯ï¼Œå¦‚è¿‡æ—‹è½¬ç‚¹æ°å¥½æ˜¯é‡å¤çš„å…ƒç´ ï¼Œå°±ä¼šä½¿å¾—æ•°æ®ä¸§å¤± ã€ŒäºŒæ®µæ€§ã€ï¼š

![](https://cdn.jsdelivr.net/gh/yokiizx/picgo@main/img/202402232329422.png)

å®˜è§£çš„åšæ³•æ˜¯æ¢å¤äºŒæ®µæ€§å³å¯ï¼š`if(nums[l] == nums[mid] && nums[mid] == nums[r]) {l++, r--}`

å·æ‡’ç‚¹å°±åªæ”¶ç¼©ä¸€è¾¹ä¹Ÿè¡Œçš„ï¼Œå·¦è¾¹æˆ–å³è¾¹éƒ½è¡Œï¼Œæ¯”å¦‚æˆ‘é€‰æ‹©äº†å½“ `nums[l] === nums[mid]` æ—¶ï¼Œæ”¶ç¼©å·¦è¾¹ç•Œ

```js
/**
 * @param {number[]} nums
 * @param {number} target
 * @return {boolean}
 */
var search = function (nums, target) {
    let l = 0,
        r = nums.length
    while (l < r) {
        const mid = l + ((r - l) >> 1)
        if (nums[mid] === target) {
            return true
        } else if (nums[mid] > nums[l]) {
            if (nums[l] <= target && target < nums[mid]) {
                r = mid
            } else {
                l = mid + 1
            }
        } else if (nums[mid] < nums[l]) {
            if (nums[mid] < target && target <= nums[r - 1]) {
                l = mid + 1
            } else {
                r = mid
            }
        } else {
            // nums[mid] === nums[l] æƒ…å†µ æ”¶ç¼©å·¦è¾¹ç•Œç›®çš„æ˜¯æ¢å¤ äºŒæ®µæ€§
            l++
        }
    }
    return false
}

/** å†æ¥çœ‹çœ‹æ”¶ç¼©å³è¾¹ç•Œçš„æƒ…å†µ */
var search = function (nums, target) {
    let l = 0,
        r = nums.length
    while (l < r) {
        const mid = l + ((r - l) >> 1)
        if (nums[mid] === target) {
            return true
        } else if (nums[mid] < nums[r - 1]) {
            if (nums[mid] < target && target <= nums[r - 1]) {
                l = mid + 1
            } else {
                r = mid
            }
        } else if (nums[mid] > nums[r - 1]) {
            if (nums[l] <= target && target < nums[mid]) {
                r = mid
            } else {
                l = mid + 1
            }
        } else if (nums[mid] === nums[r - 1]) {
            r--
        }
    }
    return false
}

/** ä¸¤è¾¹åŒæ—¶æ”¶ç¼©çš„çœ‹å®˜è§£å§~ */
```

> æ”¶ç¼©å·¦è¾¹ç•Œï¼Œå°±è®© mid å’Œå·¦ä¾§æ¯”ï¼›æ”¶ç¼©å³è¾¹ç•Œï¼Œå°±è®© mid å’Œå³ä¾§çš„æ¯”

### lc.153 å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼

è¯´å®è¯ï¼Œè¿™é“é¢˜ä¸€å¼€å§‹å›°æ‰°äº†æˆ‘å¾ˆä¹… ğŸ˜­ï¼Œå› ä¸ºå®ƒæœ‰ç‚¹ä¸ä¼—ä¸åŒ~

å½“æ—¶æˆ‘æ˜¯è¿™ä¹ˆåˆ†æçš„ï¼ˆä»¥ä¸‹çš„ mid ä»£è¡¨ nums[mid], l ä»£è¡¨ nums[l]ï¼‰ï¼š

1. å¦‚æœï¼Œæ•°ç»„ n æ¬¡æ—‹è½¬åï¼Œå•è°ƒæœ‰åºï¼Œæœ€å°å€¼å°±æ˜¯æœ€å·¦è¾¹çš„
2. å¦‚æœï¼Œæ•°ç»„ n æ¬¡æ—‹è½¬åï¼Œæ— åºï¼Œåˆ™æœ€å°å€¼å°±åœ¨äºŒåˆ†åæ— åºçš„é‚£åŠè¾¹äº†
    - 2.1 mid > lï¼Œå³åŠè¾¹æ— åºï¼Œé€‰æ‹©å³åŠè¾¹ï¼ˆå‘ï¼‰
    - 2.2 mid < lï¼Œå·¦åŠè¾¹æ— åºï¼Œé€‰æ‹©å·¦åŠè¾¹

æ­»æ´»æœ‰é‚£ä¸ªå‡ ä¸ªç”¨ä¾‹è¿‡ä¸äº†~ çœ‹äº†é¢˜è§£ï¼Œæ˜¯è·Ÿå³ä¾§æ¯”è¾ƒçš„ ğŸ˜­ whyï¼Ÿï¼Ÿï¼Ÿè·Ÿå·¦ä¾§æ¯”æœ‰å•¥ä¸ä¸€æ ·å˜›ï¼Ÿåæ¥ä»”ç»†æƒ³äº†ä¸‹ï¼Œé—®é¢˜å‡ºåœ¨äº† 2.1 mid > l å³è¾¹æ— åºï¼Œç¬¬ä¸€æ¡å°±æ˜¯æœ€å¥½çš„åä¾‹ï¼Œæ­¤æ—¶æœ€å°å€¼åœ¨æœ€å·¦è¾¹å¾—é€‰æ‹©å·¦åŠè¾¹äº†ï¼Œå› æ­¤ï¼Œ**mid ä¸ l æ¯”è¾ƒæ˜¯æ»¡è¶³ä¸äº†äºŒæ®µæ€§**çš„ï¼Œè€Œä¸ r æ¯”è¾ƒå°±ä¸ä¸€æ ·äº†ï¼š

1. mid > rï¼Œåˆ™å³ä¾§æ— åºï¼Œé€‰æ‹©å³ä¾§ï¼Œå¿½ç•¥å·¦è¾¹
2. mid < rï¼Œåˆ™è‹¥å·¦ä¾§æ— åºï¼Œé€‰æ‹©å·¦ä¾§ï¼Œå¿½ç•¥å³è¾¹ï¼›è‹¥å·¦ä¾§æœ‰åºï¼Œr æŒç»­æ”¶ç¼©é€¼è¿‘ï¼Œä¹Ÿèƒ½å¾—åˆ°ç»“æœï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥é€‰æ‹©å·¦ä¾§
    - ä¹Ÿå¯ä»¥è¿™ä¹ˆæƒ³ï¼šmid < rï¼Œå³ä¾§æœ‰åºï¼Œåˆ™ç»“æœä¸€å®šåœ¨ `[l..mid]` ä¸­

å› æ­¤ï¼Œ**mid ä¸ r æ¯”è¾ƒèƒ½æ»¡è¶³äºŒæ®µæ€§**ã€‚(PSï¼šmid æƒ³è¦ä¸ l æ¯”è¾ƒä¹Ÿæ˜¯å¯ä»¥çš„ï¼ŒäºŒåˆ†å‰å…ˆæ’é™¤æ‰æ•´ä¸ªæ•°æ®å•è°ƒä¸å°±å¥½äº†ï¼Œæ­¤å¤„å°±ä¸æ‹“å±•äº†)

å†æ€è€ƒä¸€ä¸‹ï¼Œå¦‚æœæ±‚æœ€å¤§å€¼å‘¢ï¼ŸğŸ˜ï¼Œé‚£å°±åº”è¯¥æ˜¯ä¸æ–­æ”¶ç¼© l å»é€¼è¿‘ï¼Œå°±é€‚åˆç”¨ mid å’Œ l åšæ¯”è¾ƒäº†ã€‚

---

æ¥ä¸‹æ¥è¿˜æœ‰ç¬¬äºŒä¸ªå‘ ğŸ˜­

æœ€åˆåˆå§‹åŒ–å³ä¾§è¾¹ç•Œç”¨çš„ `r === nums.length`ï¼Œæˆ‘å¯»æ€å°±è·Ÿä¹‹å‰ä¸€æ ·ï¼Œç”¨å·¦é—­å³å¼€åŒºé—´å¾—äº†ï¼Œä¸æ–™å´æœ‰æµ‹è¯•ç”¨ä¾‹æ²¡æœ‰è¿‡å» --- `[4,5,1,2,3]`ï¼Œè¿™æ˜¯ä¸ºå•¥å‘¢ï¼Œå¸¦è¿›å»ä¸€çœ‹ï¼ŒåŸæ¥æ˜¯ mid æ°å¥½ä¸ºæœ€å°å€¼æ—¶ï¼Œr æ›´æ–°ä¸º midï¼Œä½†æ˜¯éå†å´å¹¶æ²¡æœ‰åœæ­¢ï¼Œl ä»ç„¶æ˜¯å°äº r çš„ï¼Œç„¶åå°±ä¼šèµ°åˆ°é”™è¯¯çš„ç­”æ¡ˆå»äº†ã€‚

å¯æ˜¯ä¸ºä»€ä¹ˆä¹‹å‰è¿™æ ·å†™å°±æ²¡å•¥é—®é¢˜å‘¢ï¼Ÿæˆ‘åˆæ€è€ƒäº†ä¸‹ï¼Œå¥¥ï¼Œä¹‹å‰éƒ½æ˜¯ç»™ä¸€ä¸ªç›®æ ‡ targetï¼Œä¼šæœ‰åˆ¤æ–­ `nums[mid] === target` çš„æƒ…å†µï¼Œå‘½ä¸­ç›´æ¥ returnï¼›è€Œè¿™é‡Œæ˜¯æ— ç›®æ ‡çš„ï¼Œåªèƒ½è®©åŒæŒ‡é’ˆä¸æ–­é€¼è¿‘ä»è€Œå¾—åˆ°æœ€åçš„ç»“æœã€‚æ ¹æ®å‰é¢çš„åˆ†æ r çš„ update ç­–ç•¥ä¸º `r = mid`ï¼Œéº»çƒ¦å°±åœ¨è¿™é‡Œäº†ï¼Œå†æ¥çœ‹ä¸€ä¸‹å®ƒçš„ä¸¤å±‚å«ä¹‰ï¼š

1. r == mid çš„ç¬¬ä¸€å±‚å«ä¹‰ï¼Œå·¦ä¾§æ— åºï¼Œèˆå»å³ä¾§ï¼Œä½†æ­¤æ—¶çš„ mid æœ‰å¯èƒ½ä¸ºå¯è¡Œè§£ï¼Œæ‰€ä»¥ r ä¸èƒ½ç­‰äº mid -1
2. r == mid çš„ç¬¬äºŒå±‚å«ä¹‰ï¼Œå·¦ä¾§æœ‰åºï¼Œä¸æ–­é€¼è¿‘ï¼Œæ­¤æ—¶ r == midï¼Œ **æ¯æ¬¡é€¼è¿‘çš„å€¼éƒ½æœ‰å¯èƒ½ä¸ºå¯è¡Œè§£**ï¼Œè¿™å°±ä¸ `[l..r)` çš„å¯è¡Œè§£åŒºé—´ä¸ç¬¦äº†

å› æ­¤å¯è¡Œè§£åŒºé—´è®¾ä¸º `[l..r]` æ˜¯ç¬¦åˆè¦æ±‚çš„ï¼Œæ‰€ä»¥åˆå§‹åŒ–ä¸º `r = nums.length - 1`ã€‚ï¼ˆæˆ‘éšçº¦è§‰å¾—è¿™èƒŒåä¸€å®šæ˜¯æœ‰æŸç§æ•°å­¦é€»è¾‘ï¼Œæ±‚å¤§ä½¬èµæ•™ï¼‰

```js
/** é”™è¯¯è§£æ³• */
var findMin = function (nums) {
    let l = 0,
        r = nums.length // bug
    while (l < r) {
        const mid = l + ((r - l) >> 1)
        if (nums[mid] > nums[r - 1]) {
            l = mid + 1
        } else {
            r = mid
        }
    }
    return nums[r]
}
/**
 * [2,1] ä¸¾ä¾‹
 * 1. l == 0, r == 2, mid = 1, nums[1] > nums[1] : false --> r = 1
 * 2. l == 0, r == 1ï¼Œmid = 0, nums[0] > nums[0] : false --> r = 0
 * ç»“æŸå¾ªç¯ l == r == 0
 *
 * ä¼šå‘ç°ï¼Œä¸€æ—¦æ•°æ®å·§åˆäº†åï¼Œå°±ä¸€ç›´è¿›å…¥ nums[mid] å’Œ nums[mid] è‡ªèº«æ¯”è¾ƒçš„æƒ…å†µäº†
 */

/** ä¿®æ”¹å */
var findMin = function (nums) {
    let l = 0,
        r = nums.length - 1
    // ç”±æ­¤å¯è§ï¼Œç”¨ < è¿˜æ˜¯ <= å®Œå…¨å–å†³äºé¢˜æ„ï¼Œå®ƒåªæ˜¯ç”¨æ¥æ§åˆ¶éå†çš„ç»“æŸæ—¶æœºï¼Œ
    // åœ¨è¿™é‡Œï¼Œå½“ l == r æ—¶ï¼Œå°±æ˜¯è§£ï¼Œæ‰€ä»¥ < å³å¯ï¼Œï¼ˆå› ä¸ºä¸éœ€è¦å¯¹æœ€åä¸€ä¸ªå…ƒç´ åšä»€ä¹ˆæ“ä½œï¼‰
    while (l < r) {
        const mid = l + ((r - l) >> 1)
        // å³ä¾§æ— åº
        if (nums[mid] > nums[r]) {
            l = mid + 1
        } else {
            // å¦åˆ™å³ä¾§æœ‰åº ç»“æœå°±è‚¯å®šåœ¨ [l..mid] ä¸­ï¼Œæ‰€ä»¥ r = mid
            r = mid
        }
    }
    return nums[r]
}
/**
 * [2,1] ä¸¾ä¾‹
 * 1. l == 0, r == 1, mid = 0, nums[0] > nums[1] : true --> l = mid + 1 === 1
 * ç»“æŸå¾ªç¯ l == r == 1
 */
```

é‚£é€šè¿‡è¿™é“é¢˜èƒ½ç§¯ç´¯çš„ç»éªŒæ˜¯ï¼š

1. åŠ¡å¿…è¦åˆ†æå¥½é¢˜ç›®çš„äºŒæ®µæ€§ï¼Œæ­£ç¡®çš„å»é€‰æ‹©å·¦å³åˆ†åŒºï¼ŒåŒæ—¶æ³¨æ„å¯è¡Œè§£åŒºé—´åœ¨æ¯ä¸€è½®ä¸­æ˜¯å¦ä¿æŒä¸€è‡´
2. å½“æ— ç›®æ ‡ï¼Œæ ¹æ®åŒæŒ‡é’ˆå»æ¢æµ‹æå€¼çš„æ—¶å€™ï¼Œä½¿ç”¨ `[l..r]` çš„é—­åŒºé—´è¾ƒä¸ºç¨³å¦¥
3. å†å›è¿‡å¤´æ¥ç»“åˆ l.81 é¢˜ï¼Œæ—‹è½¬æ•°ç»„å¯»æ‰¾æå°å€¼ï¼Œå°±æ˜¯é€‰æ‹©æ— åºåŒºé—´ï¼Œç„¶åå†æ— åºåŒºé—´å†…å¯»æ‰¾åˆ°æœ‰åºåŒºé—´ï¼Œåœ¨æœ‰åºåŒºé—´å†…ï¼ˆå•è°ƒå¢ï¼‰ï¼Œé‚£è‚¯å®šæ˜¯ä»å³å¾€å·¦æ”¶ç¼©ï¼Œæ‰€ä»¥å’Œå³ä¾§æ¯”æ²¡æ¯›ç—…ï¼›å‡å¦‚æ˜¯æœç´¢æå¤§å€¼ï¼Œé‚£ä¹ˆå°±æ˜¯å’Œå·¦ä¾§æ¯”äº†ã€‚

### lc.154 å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼ III hard

ç›¸æ¯” lc.153 å°±æ˜¯å¤šäº†é‡å¤å…ƒç´ ï¼Œçº¸è€è™ç½¢äº†ã€‚

```js
var findMin = function (nums) {
    let l = 0,
        r = nums.length - 1
    while (l < r) {
        const mid = l + ((r - l) >> 1)
        if (nums[mid] > nums[r]) {
            l = mid + 1
        } else if (nums[mid] < nums[r]) {
            r = mid
        } else {
            // nums[mid] === nums[r]
            r--
        }
    }
    return nums[r]
}
```

æ³¨æ„ï¼šåœ¨ lc.153 é¢˜é‡Œä¹Ÿæœ‰ nums[mid] === nums[r] çš„åˆ¤æ–­ï¼Œåªæ˜¯å› ä¸º 153 é¢˜ä¿è¯äº†æ•°æ®ä¸æ˜¯é‡å¤çš„ï¼Œä»è€Œç›´æ¥æŠŠ r = mid å³å¯ï¼Œå½“é‡åˆ°æœ‰é‡å¤æ•°æ®çš„æ—¶å€™ï¼Œå°±ä¸èƒ½è¿™ä¹ˆåšäº†ï¼Œå³å†å‚è€ƒ lc.81 é¢˜ï¼Œé‡å¤æ•°æ®æ°å¥½åœ¨æ—‹è½¬ç‚¹çš„æ—¶å€™ï¼Œä¼š**ä¸§å¤±äºŒæ®µæ€§**ï¼Œè§£æ³•ä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚

### lc.162 å¯»æ‰¾å³°å€¼

è§£æ³•å’Œ lc.153 ç®€ç›´å¦‚å‡ºä¸€è¾™ï¼Œåªæ˜¯ä»æ¯”è¾ƒ mid å’Œ r å˜ä¸ºæ¯”è¾ƒ mid å’Œ mid+1ã€‚

```js
/**
 * @param {number[]} nums
 * @return {number}
 */
var findPeakElement = function (nums) {
    let l = 0,
        r = nums.length - 1
    while (l < r) {
        const mid = l + ((r - l) >> 1)
        /**
         * mid > mid + 1ï¼Œæ‰€ä»¥ mid å¯èƒ½ä¸ºæå¤§å€¼ r = mid
         * å¦åˆ™  mid <= mid + 1, mid < mid + 1 æ—¶ï¼Œ l = mid + 1, mid = mid + 1 æ—¶ï¼Œ l ä¹Ÿå¯ä»¥ç­‰äº mid + 1
         */
        if (nums[mid] > nums[mid + 1]) {
            r = mid
        } else {
            l = mid + 1
        }
    }
    return l
}

var findPeakElement = function (nums) {
    let l = 0,
        r = nums.length - 1
    while (l < r) {
        const mid = l + ((r - l) >> 1)
        /**
         * mid < mid + 1 æ—¶ï¼Œ l = mid + 1
         * å¦åˆ™ mid >= mid + 1 æ—¶ï¼Œmid > mid + 1, r = mid; mid = mid + 1ï¼Œ r ä¹Ÿå¯ä»¥ç­‰äº mid
         */
        if (nums[mid] < nums[mid + 1]) {
            l = mid + 1
        } else {
            r = mid
        }
    }
    return l
}
```

ä¸æ—‹è½¬æ•°ç»„ä¸ä¸€æ ·ï¼Œè¿™é“é¢˜ä»å·¦å¾€å³ï¼Œä»å³å¾€å·¦éƒ½å¯ä»¥å¾—åˆ°æå¤§å€¼ï¼Œæ‰€ä»¥ mid å’Œå·¦å³æ¯”éƒ½ okã€‚

<!-- æ‰€ä»¥æ±‚æå°å€¼ï¼Œå¯ä»¥ç”¨ `mid > r` æ¥åšæŠ‰æ‹©æ¡ä»¶ï¼›æ±‚æå¤§å€¼ï¼Œå¯ä»¥ç”¨ `mid < r` æ¥åšæŠ‰æ‹©æ¡ä»¶ï¼Œè¿™æ ·å­åç»­çš„é€»è¾‘å°±æ¯”è¾ƒå¥½æƒ³ã€‚å½“ç„¶äº†ï¼Œå®é™…ä¸Šæ€ä¹ˆåšéƒ½å¯ä»¥ï¼Œä¸»è¦æ˜¯è‡ªå·±å¾—ææ¸…æ¥šé€»è¾‘å³å¯ã€‚ -->

### lc.240 æœç´¢äºŒç»´çŸ©é˜µ II

ä¸ lc.74 ä¸åŒçš„æ˜¯ï¼Œä¸Šä¸€è¡Œçš„å°¾ä¸å†å¤§äºä¸‹ä¸€è¡Œçš„é¦–äº†ã€‚æœ€ç›´è§‚çš„åšæ³•å°±æ˜¯å¯¹æ¯ä¸€è¡ŒåšäºŒåˆ†ã€‚

```js
/**
 * @param {number[][]} matrix
 * @param {number} target
 * @return {boolean}
 */
var searchMatrix = function (matrix, target) {
    for (let i = 0; i < matrix.length; i++) {
        const row = matrix[i]
        let l = 0,
            r = row.length
        while (l < r) {
            const mid = l + ((r - l) >> 1)
            if (row[mid] === target) {
                return true
            } else if (row[mid] < target) {
                l = mid + 1
            } else {
                r = mid
            }
        }
    }
    return false
}
```

è¿™æ ·åšçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(mlogn)ï¼Œç®¡è§£ç»™äº†æ›´ä¼˜çš„æ–¹æ¡ˆ [Z å­—å½¢æŸ¥æ‰¾](https://leetcode.cn/problems/search-a-2d-matrix-ii/solutions/1062538/sou-suo-er-wei-ju-zhen-ii-by-leetcode-so-9hcx/)ï¼Œçœ‹äº†ä¸€ä¸‹å°±æ˜¯ä»å³ä¸Šè§’è¿›è¡Œæœç´¢ï¼Œæ ¹æ®æ¡ä»¶æ›´æ–°åæ ‡ ++y æˆ– --xã€‚

### lc.410 åˆ†å‰²æ•°ç»„çš„æœ€å¤§å€¼ hard

è¿™é“é¢˜çš„å¸¸è§„åšæ³•æ˜¯åŠ¨æ€è§„åˆ’ï¼Œèƒ½ç”¨åˆ°äºŒåˆ†æˆ‘æ˜¯å±å®æ²¡æœ‰æƒ³åˆ°ã€‚ã€‚ã€‚

> è¿™é“é¢˜ç¡®å®æœ‰éš¾åº¦ï¼Œç›´æ¥çœ‹å®˜è§£å§ï¼Œç”¨çš„æ˜¯ [äºŒåˆ†+è´ªå¿ƒ](https://leetcode.cn/problems/split-array-largest-sum/solutions/345417/fen-ge-shu-zu-de-zui-da-zhi-by-leetcode-solution/)

### lc.658 æ‰¾åˆ° k ä¸ªæœ€æ¥è¿‘çš„å…ƒç´ 

```js
var findClosestElements = function (arr, k, x) {
    // å…ˆæ‰¾åˆ° x çš„ä½ç½® iï¼Œå†ä» i å¾€å·¦å³ä¸¤è¾¹æ‹“å±• [p..q] ç›´åˆ° q - p + 1 === k
    let l = 0,
        r = arr.length
    while (l < r) {
        const mid = l + ((r - l) >> 1)
        if (arr[mid] < x) {
            l = mid + 1
        } else {
            r = mid
        }
    }
    /**
     * å…³é”®ç‚¹ï¼Œæ­¤æ—¶ l == rï¼Œä¸” [r..] éƒ½ **å¤§äºç­‰äº** x; [..r-1] éƒ½å°äº x
     *
     * å¦‚è¿‡æ²¡æœ‰ l = r - 1 è¿™ä¸€æ­¥ï¼Œé‚£ä¹ˆ [...l] ä¹Ÿéƒ½æ˜¯å°äºç­‰äº x çš„ï¼Œå°±ä¸§å¤±äº†äºŒæ®µæ€§ï¼Œ
     *          å½“ leftAbs === rightAbs æ—¶ï¼Œå°±åˆ†ä¸æ¸…åˆ°åº•æ˜¯è¯¥ l-- è¿˜æ˜¯ r++
     *
     * æœ‰äº† l == r - 1ï¼Œåˆ™å°±èƒ½ä¿è¯ [...l] ä¸€å®šæ˜¯å°äº x çš„ï¼Œä¹Ÿå°±æœ‰äº† (l..r] çš„å¯è¡Œè§£åŒºé—´ï¼Œ
     *          å½“ leftAbs === rightAbs æ—¶ï¼Œåº”è¯¥ l--
     */
    l = r - 1
    while (r - l <= k) {
        const leftAbs = x - arr[l]
        const rightAbs = arr[r] - x
        /** åŒæ—¶éœ€è¦è€ƒè™‘xä¸åœ¨æ•°ç»„ç´¢å¼•å†…çš„æƒ…å†µ */
        if (l < 0) {
            r++
        } else if (r > arr.length - 1) {
            l--
        } else if (leftAbs <= rightAbs) {
            l--
        } else {
            r++
        }
    }
    return arr.slice(l + 1, r)
}
```

å†ä¸€æ¬¡åŠ æ·±å¯è¡Œè§£åŒºé—´çš„ç†è§£ ğŸ¶

### lc.793 é˜¶ä¹˜å‡½æ•°å K ä¸ªé›¶ hard

> æ•°å­¦é¢˜ï¼Œ[ä¸çœ‹ç­”æ¡ˆæ˜¯çœŸä¸ä¼šå•Š~](https://leetcode.cn/problems/preimage-size-of-factorial-zeroes-function/solutions/1776603/jie-cheng-han-shu-hou-k-ge-ling-by-leetc-n6vj/)

### lc.852 å±±è„‰æ•°ç»„çš„å³°é¡¶ç´¢å¼•

```js
/**
 * @param {number[]} arr
 * @return {number}
 */
var peakIndexInMountainArray = function (arr) {
    let l = 0,
        r = arr.length - 1
    while (l < r) {
        const mid = l + ((r - l) >> 1)
        if (arr[mid] < arr[mid + 1]) {
            l = mid + 1
        } else {
            r = mid
        }
    }
    return l
}
```

å°±é—®ä½ è¿™å’Œ lc.162 æœ‰å•¥åŒºåˆ«å—ã€‚ã€‚ã€‚

### lc.875 çˆ±åƒé¦™è•‰çš„ç‚ç‚

```js
/**
 * @param {number[]} piles
 * @param {number} h
 * @return {number}
 */
var minEatingSpeed = function (piles, h) {
    // å¯»æ‰¾ kï¼Œæ ¹æ®é¢˜æ„ k çš„æœ€å°å€¼ä¸º 1ï¼Œ æœ€å¤§å€¼ä¸º piles é‡Œçš„æœ€å¤§å€¼
    let max = 0
    for (const num of piles) {
        max = num > max ? num : max
    }
    let l = 1,
        r = max
    while (l < r) {
        const mid = l + ((r - l) >> 1)
        if (getHourWhenSpeedIsMid(piles, mid) > h) {
            l = mid + 1
        } else {
            r = mid // åˆå»æ”¶ç¼©å³è¾¹ç•Œäº†~
        }
    }
    return l
}
function getHourWhenSpeedIsMid(piles, speed) {
    let hours = 0
    for (const num of piles) {
        hours += Math.ceil(num / speed)
    }
    return hours
}
```

### lc.1011 åœ¨ D å¤©å†…é€è¾¾åŒ…è£¹çš„èƒ½åŠ›

ä¸ lc.875 å‡ ä¹ä¸€æ¨¡ä¸€æ ·

```js
var shipWithinDays = function (weights, days) {
    // æ ¹æ®é¢˜æ„ï¼Œæœ€ä½è¿è½½èƒ½åŠ›çš„æœ€å°å€¼ä¸º weights çš„æœ€å¤§å€¼ï¼Œæœ€å¤§è¿è½½èƒ½åŠ›ä¸º weights çš„å’Œ
    let l = Math.max(...weights),
        r = weights.reduce((a, b) => a + b)
    while (l < r) {
        const mid = l + ((r - l) >> 1)
        if (getDays(weights, mid) > days) {
            l = mid + 1
        } else {
            r = mid
        }
    }
    return l
}
function getDays(weights, mid) {
    let days = 1
    let count = 0
    for (const weight of weights) {
        count += weight
        if (count > mid) {
            days++
            count = weight
        }
    }
    return days
}
```

### lc.1201 ä¸‘æ•° III

è¿™é¢˜ä¹Ÿæ˜¯æ²¡ç‚¹æ•°å­¦çŸ¥è¯†æ˜¯çœŸçš„ä¸ä¼šå•Š ğŸ˜­ æœ¬é¢˜ç­”æ¡ˆæ˜¯æˆ‘æ‹·è´çš„ï¼Œç®—æ˜¯å¼€äº†çœ¼ç•Œäº†

1. [1..i] ä¸­èƒ½è¢«æ•°å­— a æ•´é™¤çš„æ•°å­—ä¸ªæ•°ä¸º i / a
2. å®¹æ–¥åŸç†ï¼š[1..i]ä¸­èƒ½è¢« a æˆ– b æˆ– c æ•´é™¤çš„æ•°çš„ä¸ªæ•° = i/aâˆ’i/bâˆ’i/câˆ’i/abâˆ’i/bcâˆ’i/ac+i/abcã€‚å…¶ä¸­ i/ab ä»£è¡¨èƒ½è¢« a å’Œ b æ•´é™¤çš„æ•°ï¼Œå…¶ä»–åŒç†ã€‚

```js
/**
 * @param {number} n
 * @param {number} a
 * @param {number} b
 * @param {number} c
 * @return {number}
 */
var nthUglyNumber = function (n, a, b, c) {
    const ab = lcm(a, b)
    const ac = lcm(a, c)
    const bc = lcm(b, c)
    const abc = lcm(ab, c)
    let left = Math.min(a, b, c)
    let right = n * left
    while (left < right) {
        const mid = Math.floor((left + right) / 2)
        const count =
            low(mid, a) +
            low(mid, b) +
            low(mid, c) -
            low(mid, ab) -
            low(mid, ac) -
            low(mid, bc) +
            low(mid, abc)
        if (count >= n) {
            right = mid
        } else {
            left = mid + 1
        }
    }
    return right
}
function low(mid, val) {
    return (mid / val) | 0
}
function lcm(a, b) {
    //æœ€å°å…¬å€æ•°
    return (a * b) / gcd(a, b)
}
function gcd(a, b) {
    //æœ€å¤§å…¬çº¦æ•°
    return b === 0 ? a : gcd(b, a % b)
}
```

---

æ€»ç»“ï¼šä¸€æ—¦å¯¹å¾ªç¯ä¸å˜é‡å’Œå¯è¡Œè§£åŒºé—´æœ‰äº†æ·±åˆ»çš„ç†è§£ï¼ŒäºŒåˆ†æ³•æœ¬èº«æ˜¯æ²¡æœ‰ä»€ä¹ˆéš¾ç‚¹çš„ï¼Œä¸Šæ–¹çš„ hard é¢˜ï¼Œéš¾åœ¨äº†äºŒåˆ†ä¸å…¶ä»–é€»è¾‘çš„æ‰å’Œï¼Œæ¯”å¦‚è´ªå¿ƒå’Œæ•°å­¦ï¼Œæ‰€ä»¥å¯¹äºäºŒåˆ†æœ¬èº«çš„ä¸œè¥¿è¦è´¼è´¼è´¼ç†Ÿç»ƒçš„æŒæ¡ï¼Œå½“æˆå·¥å…·ä¸€æ ·ï¼Œåœ¨é‡åˆ°å¿«é€ŸæŸ¥è¯¢ä¸”èƒ½ç”¨äºŒåˆ†çš„æƒ…å†µä¸‹ï¼Œèƒ½ä¿¡æ‰‹æ‹ˆæ¥ï¼Œpeaceï¼

